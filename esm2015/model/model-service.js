/**
 * @license
 * Copyright (C) Gnucoop soc. coop.
 *
 * This file is part of the Gnucoop Angular Toolkit (gngt).
 *
 * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.
 *
 */
import { ofType } from '@ngrx/effects';
import { createFeatureSelector, createSelector, select } from '@ngrx/store';
import { pipe, throwError } from 'rxjs';
import { filter, map, switchMap, take, tap } from 'rxjs/operators';
import { createAction } from './utils';
export class ModelService {
    constructor(_store, _actions, _actionTypes, statePrefixes) {
        this._store = _store;
        this._actions = _actions;
        this._actionTypes = _actionTypes;
        const packageState = createFeatureSelector(statePrefixes[0]);
        this._modelState = createSelector(packageState, s => s[statePrefixes[1]]);
        this._lastGetEntry = pipe(select(createSelector(this._modelState, (state) => state.get)), filter(g => g.length > 0), map(g => g[0]));
        this._lastListEntry = pipe(select(createSelector(this._modelState, (state) => state.list)), filter(g => g.length > 0), map(g => g[0]));
        this._lastCreateEntry = pipe(select(createSelector(this._modelState, (state) => state.create)), filter(g => g.length > 0), map(g => g[0]));
        this._lastPatchEntry = pipe(select(createSelector(this._modelState, (state) => state.patch)), filter(g => g.length > 0), map(g => g[0]));
        this._lastUpdateEntry = pipe(select(createSelector(this._modelState, (state) => state.update)), filter(g => g.length > 0), map(g => g[0]));
        this._lastDeleteEntry = pipe(select(createSelector(this._modelState, (state) => state.delete)), filter(g => g.length > 0), map(g => g[0]));
        this._lastDeleteAllEntry = pipe(select(createSelector(this._modelState, (state) => state.deleteAll)), filter(g => g.length > 0), map(g => g[0]));
        this._lastQueryEntry = pipe(select(createSelector(this._modelState, (state) => state.query)), filter(g => g.length > 0), map(g => g[0]));
    }
    getGetLoading() {
        return this._store.pipe(this._lastGetEntry, map(g => g.loading));
    }
    getGetOptions() {
        return this._store.pipe(this._lastGetEntry, map(g => g.options));
    }
    getGetId() {
        return this._store.pipe(this._lastGetEntry, map(g => g.id));
    }
    getGetObject() {
        return this._store.pipe(this._lastGetEntry, map(g => g.object));
    }
    getGetError() {
        return this._store.pipe(this._lastGetEntry, map(g => g.error));
    }
    getListLoading() {
        return this._store.pipe(this._lastListEntry, map(g => g.loading));
    }
    getListOptions() {
        return this._store.pipe(this._lastListEntry, map(g => g.options));
    }
    getListObjects() {
        return this._store.pipe(this._lastListEntry, map(g => g.objects));
    }
    getListError() {
        return this._store.pipe(this._lastListEntry, map(g => g.error));
    }
    getListHasNext() {
        return this._store.pipe(this._lastListEntry, map(g => g.objects != null && g.objects.next != null));
    }
    getListCurrentStart() {
        return this._store.pipe(this._lastListEntry, filter(g => g.options != null), map(g => g.options.start != null ? g.options.start : 1));
    }
    getCreateLoading() {
        return this._store.pipe(this._lastCreateEntry, map(g => g.loading));
    }
    getCreateObject() {
        return this._store.pipe(this._lastCreateEntry, map(g => g.object));
    }
    getCreateError() {
        return this._store.pipe(this._lastCreateEntry, map(g => g.error));
    }
    getUpdateLoading() {
        return this._store.pipe(this._lastUpdateEntry, map(g => g.loading));
    }
    getUpdateId() {
        return this._store.pipe(this._lastUpdateEntry, map(g => g.id));
    }
    getUpdateObject() {
        return this._store.pipe(this._lastUpdateEntry, map(g => g.object));
    }
    getUpdateError() {
        return this._store.pipe(this._lastUpdateEntry, map(g => g.error));
    }
    getPatchLoading() {
        return this._store.pipe(this._lastPatchEntry, map(g => g.loading));
    }
    getPatchId() {
        return this._store.pipe(this._lastPatchEntry, map(g => g.id));
    }
    getPatchObject() {
        return this._store.pipe(this._lastPatchEntry, map(g => g.object));
    }
    getPatchError() {
        return this._store.pipe(this._lastPatchEntry, map(g => g.error));
    }
    getDeleteLoading() {
        return this._store.pipe(this._lastDeleteEntry, map(g => g.loading));
    }
    getDeleteId() {
        return this._store.pipe(this._lastDeleteEntry, map(g => g.id));
    }
    getDeleteObject() {
        return this._store.pipe(this._lastDeleteEntry, map(g => g.object));
    }
    getDeleteError() {
        return this._store.pipe(this._lastDeleteEntry, map(g => g.error));
    }
    getDeleteAllLoading() {
        return this._store.pipe(this._lastDeleteAllEntry, map(g => g.loading));
    }
    getDeleteAllIds() {
        return this._store.pipe(this._lastDeleteAllEntry, map(g => g.ids));
    }
    getDeleteAllObjects() {
        return this._store.pipe(this._lastDeleteAllEntry, map(g => g.objects));
    }
    getDeleteAllError() {
        return this._store.pipe(this._lastDeleteAllEntry, map(g => g.error));
    }
    getQueryLoading() {
        return this._store.pipe(this._lastQueryEntry, map(g => g.loading));
    }
    getQueryOptions() {
        return this._store.pipe(this._lastQueryEntry, map(g => g.options));
    }
    getQueryObjects() {
        return this._store.pipe(this._lastQueryEntry, map(g => g.objects));
    }
    getQueryError() {
        return this._store.pipe(this._lastQueryEntry, map(g => g.error));
    }
    getQueryHasNext() {
        return this._store.pipe(this._lastQueryEntry, map(g => g.objects != null && g.objects.next != null));
    }
    getQueryCurrentStart() {
        return this._store.pipe(this._lastQueryEntry, filter(g => g.options != null), map(g => g.options.start != null ? g.options.start : 1));
    }
    getCreateSuccess() {
        return this._actions.pipe(ofType(this._actionTypes.CREATE_SUCCESS));
    }
    getUpdateSuccess() {
        return this._actions.pipe(ofType(this._actionTypes.UPDATE_SUCCESS));
    }
    getPatchSuccess() {
        return this._actions.pipe(ofType(this._actionTypes.PATCH_SUCCESS));
    }
    getDeleteSuccess() {
        return this._actions.pipe(ofType(this._actionTypes.DELETE_SUCCESS));
    }
    getDeleteAllSuccess() {
        return this._actions.pipe(ofType(this._actionTypes.DELETE_ALL_SUCCESS));
    }
    get(id) {
        const action = createAction({ type: this._actionTypes.GET, payload: { id } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.GET_SUCCESS, this._actionTypes.GET_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.get)(s)), map(gets => gets.find(g => g.uuid === action.uuid)), filter(get => get != null), tap(get => {
            if (get.error != null) {
                throwError(get.error);
            }
        }), filter(get => get.object != null), map(get => get.object), take(1));
    }
    list(options) {
        const action = createAction({ type: this._actionTypes.LIST, payload: { params: options || {} } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.LIST_SUCCESS, this._actionTypes.LIST_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.list)(s)), map(lists => lists.find(l => l.uuid === action.uuid)), filter(list => list != null), tap(list => {
            if (list.error != null) {
                throwError(list.error);
            }
        }), filter(list => list.objects != null), map(list => list.objects), take(1));
    }
    create(data) {
        const action = createAction({
            type: this._actionTypes.CREATE,
            payload: { item: data },
        });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.CREATE_SUCCESS, this._actionTypes.CREATE_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.create)(s)), map(creates => creates.find(c => c.uuid === action.uuid)), filter(creates => creates != null), tap(create => {
            if (create.error != null) {
                throwError(create.error);
            }
        }), filter(create => create.object != null), map(create => create.object), take(1));
    }
    update(data) {
        const action = createAction({
            type: this._actionTypes.UPDATE,
            payload: { item: data },
        });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.UPDATE_SUCCESS, this._actionTypes.UPDATE_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.update)(s)), map(updates => updates.find(u => u.uuid === action.uuid)), filter(updates => updates != null), tap(update => {
            if (update.error != null) {
                throwError(update.error);
            }
        }), filter(update => update.object != null), map(update => update.object), take(1));
    }
    patch(data) {
        const action = createAction({ type: this._actionTypes.PATCH, payload: { item: data } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.PATCH_SUCCESS, this._actionTypes.PATCH_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.patch)(s)), map(patches => patches.find(p => p.uuid === action.uuid)), filter(patches => patches != null), tap(patch => {
            if (patch.error != null) {
                throwError(patch.error);
            }
        }), filter(patch => patch.object != null), map(patch => patch.object), take(1));
    }
    delete(data) {
        const action = createAction({ type: this._actionTypes.DELETE, payload: { item: data } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.DELETE_SUCCESS, this._actionTypes.DELETE_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.delete)(s)), map(dels => dels.find(d => d.uuid === action.uuid)), filter(dels => dels != null), tap(del => {
            if (del.error != null) {
                throwError(del.error);
            }
        }), filter(del => del.object != null), map(del => del.object), take(1));
    }
    deleteAll(data) {
        const action = createAction({ type: this._actionTypes.DELETE_ALL, payload: { items: data } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.DELETE_ALL_SUCCESS, this._actionTypes.DELETE_ALL_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.deleteAll)(s)), map(deleteAlls => deleteAlls.find(d => d.uuid === action.uuid)), filter(deleteAlls => deleteAlls != null), tap(deleteAll => {
            if (deleteAll.error != null) {
                throwError(deleteAll.error);
            }
        }), filter(deleteAll => deleteAll.objects != null), map(deleteAll => deleteAll.objects), take(1));
    }
    query(options) {
        const action = createAction({ type: this._actionTypes.QUERY, payload: { params: options || {} } });
        this._store.dispatch(action);
        const actResult = this._actions.pipe(ofType(this._actionTypes.QUERY_SUCCESS, this._actionTypes.QUERY_FAILURE), filter(a => a.uuid === action.uuid));
        return actResult.pipe(switchMap(() => this._store), select(s => createSelector(this._modelState, (state) => state.query)(s)), map(queries => queries.find(q => q.uuid === action.uuid)), filter(queries => queries != null), tap(query => {
            if (query.error != null) {
                throwError(query.error);
            }
        }), filter(query => query.objects != null), map(query => query.objects), take(1));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwtc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb3JlL21vZGVsL21vZGVsLXNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQkc7QUFVSCxPQUFPLEVBQVUsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQzlDLE9BQU8sRUFBQyxxQkFBcUIsRUFBRSxjQUFjLEVBQW9CLE1BQU0sRUFBUSxNQUFNLGFBQWEsQ0FBQztBQUNuRyxPQUFPLEVBQWEsSUFBSSxFQUFFLFVBQVUsRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDakUsT0FBTyxFQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQW9CakUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUVyQyxNQUFNLE9BQWdCLFlBQVk7SUFzQmhDLFlBQ2MsTUFBNkIsRUFBWSxRQUFxQyxFQUNoRixZQUFlLEVBQUUsYUFBK0I7UUFEOUMsV0FBTSxHQUFOLE1BQU0sQ0FBdUI7UUFBWSxhQUFRLEdBQVIsUUFBUSxDQUE2QjtRQUNoRixpQkFBWSxHQUFaLFlBQVksQ0FBRztRQUN6QixNQUFNLFlBQVksR0FBRyxxQkFBcUIsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsV0FBVyxHQUFHLGNBQWMsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBVSxDQUFFLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVwRixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FDckIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFD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QUksS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQ3RDLENBQUM7UUFDRixPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQ2pCLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQzVCLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBVyxDQUFDLENBQUMsRUFDbEYsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQ3pELE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsRUFDbEMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ1YsSUFBSSxLQUFNLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtnQkFDeEIsVUFBVSxDQUFDLEtBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMxQjtRQUNILENBQUMsQ0FBQyxFQUNGLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQU0sQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLEVBQ3ZDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQU0sQ0FBQyxPQUFRLENBQUMsRUFDN0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUNWLENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKEMpIEdudWNvb3Agc29jLiBjb29wLlxuICpcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBHbnVjb29wIEFuZ3VsYXIgVG9vbGtpdCAoZ25ndCkuXG4gKlxuICogR251Y29vcCBBbmd1bGFyIFRvb2xraXQgKGduZ3QpIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG4gKiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuICogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi5cbiAqXG4gKiBHbnVjb29wIEFuZ3VsYXIgVG9vbGtpdCAoZ25ndCkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG4gKiBhbG9uZyB3aXRoIEdudWNvb3AgQW5ndWxhciBUb29sa2l0IChnbmd0KS4gIElmIG5vdCwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8uXG4gKlxuICovXG5cbmltcG9ydCB7XG4gIE1vZGVsLFxuICBNb2RlbEdldFBhcmFtcyxcbiAgTW9kZWxMaXN0UGFyYW1zLFxuICBNb2RlbExpc3RSZXN1bHQsXG4gIE1vZGVsUXVlcnlQYXJhbXNcbn0gZnJvbSAnQGduZ3QvY29yZS9jb21tb24nO1xuaW1wb3J0ICogYXMgZnJvbVJvb3QgZnJvbSAnQGduZ3QvY29yZS9yZWR1Y2Vycyc7XG5pbXBvcnQge0FjdGlvbnMsIG9mVHlwZX0gZnJvbSAnQG5ncngvZWZmZWN0cyc7XG5pbXBvcnQge2NyZWF0ZUZlYXR1cmVTZWxlY3RvciwgY3JlYXRlU2VsZWN0b3IsIE1lbW9pemVkU2VsZWN0b3IsIHNlbGVjdCwgU3RvcmV9IGZyb20gJ0BuZ3J4L3N0b3JlJztcbmltcG9ydCB7T2JzZXJ2YWJsZSwgcGlwZSwgdGhyb3dFcnJvciwgVW5hcnlGdW5jdGlvbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQge2ZpbHRlciwgbWFwLCBzd2l0Y2hNYXAsIHRha2UsIHRhcH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQge1xuICBNb2RlbEFjdGlvblR5cGVzLFxuICBNb2RlbENyZWF0ZUFjdGlvbixcbiAgTW9kZWxDcmVhdGVTdWNjZXNzQWN0aW9uLFxuICBNb2RlbERlbGV0ZUFjdGlvbixcbiAgTW9kZWxEZWxldGVBbGxBY3Rpb24sXG4gIE1vZGVsRGVsZXRlQWxsU3VjY2Vzc0FjdGlvbixcbiAgTW9kZWxEZWxldGVTdWNjZXNzQWN0aW9uLFxuICBNb2RlbEdldEFjdGlvbixcbiAgTW9kZWxMaXN0QWN0aW9uLFxuICBNb2RlbFBhdGNoQWN0aW9uLFxuICBNb2RlbFF1ZXJ5QWN0aW9uLFxuICBNb2RlbFVwZGF0ZUFjdGlvbixcbiAgTW9kZWxVcGRhdGVTdWNjZXNzQWN0aW9uLFxufSBmcm9tICcuL21vZGVsLWFjdGlvbnMnO1xuaW1wb3J0IHtNb2RlbEVycm9yfSBmcm9tICcuL21vZGVsLWVycm9yJztcbmltcG9ydCB7TW9kZWxHZW5lcmljQWN0aW9ufSBmcm9tICcuL21vZGVsLWdlbmVyaWMtYWN0aW9uJztcbmltcG9ydCAqIGFzIGZyb21Nb2RlbCBmcm9tICcuL3JlZHVjZXJzJztcbmltcG9ydCB7Y3JlYXRlQWN0aW9ufSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1vZGVsU2VydmljZTxcbiAgICBUIGV4dGVuZHMgTW9kZWwgPSBNb2RlbCwgUyBleHRlbmRzIGZyb21Nb2RlbC5TdGF0ZTxUPiA9IGZyb21Nb2RlbC5TdGF0ZTxUPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgZXh0ZW5kcyBNb2RlbEFjdGlvblR5cGVzID0gTW9kZWxBY3Rpb25UeXBlcz4ge1xuICBwcm90ZWN0ZWQgX21vZGVsU3RhdGU6IE1lbW9pemVkU2VsZWN0b3I8b2JqZWN0LCBTPjtcblxuICBwcml2YXRlIF9sYXN0R2V0RW50cnk6XG4gICAgICBVbmFyeUZ1bmN0aW9uPE9ic2VydmFibGU8ZnJvbVJvb3QuU3RhdGU+LCBPYnNlcnZhYmxlPGZyb21Nb2RlbC5Nb2RlbEdldFN0YXRlPFQ+Pj47XG4gIHByaXZhdGUgX2xhc3RMaXN0RW50cnk6XG4gICAgICBVbmFyeUZ1bmN0aW9uPE9ic2VydmFibGU8ZnJvbVJvb3QuU3RhdGU+LCBPYnNlcnZhYmxlPGZyb21Nb2RlbC5Nb2RlbExpc3RTdGF0ZTxUPj4+O1xuICBwcml2YXRlIF9sYXN0Q3JlYXRlRW50cnk6XG4gICAgICBVbmFyeUZ1bmN0aW9uPE9ic2VydmFibGU8ZnJvbVJvb3QuU3RhdGU+LCBPYnNlcnZhYmxlPGZyb21Nb2RlbC5Nb2RlbENyZWF0ZVN0YXRlPFQ+Pj47XG4gIHByaXZhdGUgX2xhc3RQYXRjaEVudHJ5OlxuICAgICAgVW5hcnlGdW5jdGlvbjxPYnNlcnZhYmxlPGZyb21Sb290LlN0YXRlPiwgT2JzZXJ2YWJsZTxmcm9tTW9kZWwuTW9kZWxQYXRjaFN0YXRlPFQ+Pj47XG4gIHByaXZhdGUgX2xhc3RVcGRhdGVFbnRyeTpcbiAgICAgIFVuYXJ5RnVuY3Rpb248T2JzZXJ2YWJsZTxmcm9tUm9vdC5TdGF0ZT4sIE9ic2VydmFibGU8ZnJvbU1vZGVsLk1vZGVsVXBkYXRlU3RhdGU8VD4+PjtcbiAgcHJpdmF0ZSBfbGFzdERlbGV0ZUVudHJ5OlxuICAgICAgVW5hcnlGdW5jdGlvbjxPYnNlcnZhYmxlPGZyb21Sb290LlN0YXRlPiwgT2JzZXJ2YWJsZTxmcm9tTW9kZWwuTW9kZWxEZWxldGVTdGF0ZTxUPj4+O1xuICBwcml2YXRlIF9sYXN0RGVsZXRlQWxsRW50cnk6XG4gICAgICBVbmFyeUZ1bmN0aW9uPE9ic2VydmFibGU8ZnJvbVJvb3QuU3RhdGU+LCBPYnNlcnZhYmxlPGZyb21Nb2RlbC5Nb2RlbERlbGV0ZUFsbFN0YXRlPFQ+Pj47XG4gIHByaXZhdGUgX2xhc3RRdWVyeUVudHJ5OlxuICAgICAgVW5hcnlGdW5jdGlvbjxPYnNlcnZhYmxlPGZyb21Sb290LlN0YXRlPiwgT2JzZXJ2YWJsZTxmcm9tTW9kZWwuTW9kZWxRdWVyeVN0YXRlPFQ+Pj47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBwcm90ZWN0ZWQgX3N0b3JlOiBTdG9yZTxmcm9tUm9vdC5TdGF0ZT4sIHByb3RlY3RlZCBfYWN0aW9uczogQWN0aW9uczxNb2RlbEdlbmVyaWNBY3Rpb24+LFxuICAgICAgcHJpdmF0ZSBfYWN0aW9uVHlwZXM6IEEsIHN0YXRlUHJlZml4ZXM6IFtzdHJpbmcsIHN0cmluZ10pIHtcbiAgICBjb25zdCBwYWNrYWdlU3RhdGUgPSBjcmVhdGVGZWF0dXJlU2VsZWN0b3Ioc3RhdGVQcmVmaXhlc1swXSk7XG4gICAgdGhpcy5fbW9kZWxTdGF0ZSA9IGNyZWF0ZVNlbGVjdG9yKHBhY2thZ2VTdGF0ZSwgcyA9PiA8Uz4oPGFueT5zKVtzdGF0ZVByZWZpeGVzWzFdXSk7XG5cbiAgICB0aGlzLl9sYXN0R2V0RW50cnkgPSBwaXBlKFxuICAgICAgICBzZWxlY3QoY3JlYXRlU2VsZWN0b3IodGhpcy5fbW9kZWxTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5nZXQpKSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5sZW5ndGggPiAwKSxcbiAgICAgICAgbWFwKGcgPT4gZ1swXSksXG4gICAgKTtcbiAgICB0aGlzLl9sYXN0TGlzdEVudHJ5ID0gcGlwZShcbiAgICAgICAgc2VsZWN0KGNyZWF0ZVNlbGVjdG9yKHRoaXMuX21vZGVsU3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUubGlzdCkpLFxuICAgICAgICBmaWx0ZXIoZyA9PiBnLmxlbmd0aCA+IDApLFxuICAgICAgICBtYXAoZyA9PiBnWzBdKSxcbiAgICApO1xuICAgIHRoaXMuX2xhc3RDcmVhdGVFbnRyeSA9IHBpcGUoXG4gICAgICAgIHNlbGVjdChjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLmNyZWF0ZSkpLFxuICAgICAgICBmaWx0ZXIoZyA9PiBnLmxlbmd0aCA+IDApLFxuICAgICAgICBtYXAoZyA9PiBnWzBdKSxcbiAgICApO1xuICAgIHRoaXMuX2xhc3RQYXRjaEVudHJ5ID0gcGlwZShcbiAgICAgICAgc2VsZWN0KGNyZWF0ZVNlbGVjdG9yKHRoaXMuX21vZGVsU3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUucGF0Y2gpKSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5sZW5ndGggPiAwKSxcbiAgICAgICAgbWFwKGcgPT4gZ1swXSksXG4gICAgKTtcbiAgICB0aGlzLl9sYXN0VXBkYXRlRW50cnkgPSBwaXBlKFxuICAgICAgICBzZWxlY3QoY3JlYXRlU2VsZWN0b3IodGhpcy5fbW9kZWxTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS51cGRhdGUpKSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5sZW5ndGggPiAwKSxcbiAgICAgICAgbWFwKGcgPT4gZ1swXSksXG4gICAgKTtcbiAgICB0aGlzLl9sYXN0RGVsZXRlRW50cnkgPSBwaXBlKFxuICAgICAgICBzZWxlY3QoY3JlYXRlU2VsZWN0b3IodGhpcy5fbW9kZWxTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5kZWxldGUpKSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5sZW5ndGggPiAwKSxcbiAgICAgICAgbWFwKGcgPT4gZ1swXSksXG4gICAgKTtcbiAgICB0aGlzLl9sYXN0RGVsZXRlQWxsRW50cnkgPSBwaXBlKFxuICAgICAgICBzZWxlY3QoY3JlYXRlU2VsZWN0b3IodGhpcy5fbW9kZWxTdGF0ZSwgKHN0YXRlKSA9PiBzdGF0ZS5kZWxldGVBbGwpKSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5sZW5ndGggPiAwKSxcbiAgICAgICAgbWFwKGcgPT4gZ1swXSksXG4gICAgKTtcbiAgICB0aGlzLl9sYXN0UXVlcnlFbnRyeSA9IHBpcGUoXG4gICAgICAgIHNlbGVjdChjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLnF1ZXJ5KSksXG4gICAgICAgIGZpbHRlcihnID0+IGcubGVuZ3RoID4gMCksXG4gICAgICAgIG1hcChnID0+IGdbMF0pLFxuICAgICk7XG4gIH1cblxuICBnZXRHZXRMb2FkaW5nKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0R2V0RW50cnksXG4gICAgICAgIG1hcChnID0+IGcubG9hZGluZyksXG4gICAgKTtcbiAgfVxuXG4gIGdldEdldE9wdGlvbnMoKTogT2JzZXJ2YWJsZTxNb2RlbEdldFBhcmFtcz4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0R2V0RW50cnksXG4gICAgICAgIG1hcChnID0+IGcub3B0aW9ucyksXG4gICAgKTtcbiAgfVxuXG4gIGdldEdldElkKCk6IE9ic2VydmFibGU8bnVtYmVyfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdEdldEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmlkKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0R2V0T2JqZWN0KCk6IE9ic2VydmFibGU8VHxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RHZXRFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vYmplY3QpLFxuICAgICk7XG4gIH1cblxuICBnZXRHZXRFcnJvcigpOiBPYnNlcnZhYmxlPE1vZGVsRXJyb3J8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0R2V0RW50cnksXG4gICAgICAgIG1hcChnID0+IGcuZXJyb3IpLFxuICAgICk7XG4gIH1cblxuICBnZXRMaXN0TG9hZGluZygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdExpc3RFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5sb2FkaW5nKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0TGlzdE9wdGlvbnMoKTogT2JzZXJ2YWJsZTxNb2RlbExpc3RQYXJhbXM+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdExpc3RFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vcHRpb25zKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0TGlzdE9iamVjdHMoKTogT2JzZXJ2YWJsZTxNb2RlbExpc3RSZXN1bHQ8VD58bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0TGlzdEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLm9iamVjdHMpLFxuICAgICk7XG4gIH1cblxuICBnZXRMaXN0RXJyb3IoKTogT2JzZXJ2YWJsZTxNb2RlbEVycm9yfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdExpc3RFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5lcnJvciksXG4gICAgKTtcbiAgfVxuXG4gIGdldExpc3RIYXNOZXh0KCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0TGlzdEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLm9iamVjdHMgIT0gbnVsbCAmJiBnLm9iamVjdHMhLm5leHQgIT0gbnVsbCksXG4gICAgKTtcbiAgfVxuXG4gIGdldExpc3RDdXJyZW50U3RhcnQoKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdExpc3RFbnRyeSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5vcHRpb25zICE9IG51bGwpLFxuICAgICAgICBtYXAoZyA9PiBnLm9wdGlvbnMhLnN0YXJ0ICE9IG51bGwgPyBnLm9wdGlvbnMhLnN0YXJ0IDogMSksXG4gICAgKTtcbiAgfVxuXG4gIGdldENyZWF0ZUxvYWRpbmcoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RDcmVhdGVFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5sb2FkaW5nKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0Q3JlYXRlT2JqZWN0KCk6IE9ic2VydmFibGU8VHxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RDcmVhdGVFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vYmplY3QpLFxuICAgICk7XG4gIH1cblxuICBnZXRDcmVhdGVFcnJvcigpOiBPYnNlcnZhYmxlPE1vZGVsRXJyb3J8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0Q3JlYXRlRW50cnksXG4gICAgICAgIG1hcChnID0+IGcuZXJyb3IpLFxuICAgICk7XG4gIH1cblxuICBnZXRVcGRhdGVMb2FkaW5nKCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0VXBkYXRlRW50cnksXG4gICAgICAgIG1hcChnID0+IGcubG9hZGluZyksXG4gICAgKTtcbiAgfVxuXG4gIGdldFVwZGF0ZUlkKCk6IE9ic2VydmFibGU8bnVtYmVyfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdFVwZGF0ZUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmlkKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0VXBkYXRlT2JqZWN0KCk6IE9ic2VydmFibGU8VHxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RVcGRhdGVFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vYmplY3QpLFxuICAgICk7XG4gIH1cblxuICBnZXRVcGRhdGVFcnJvcigpOiBPYnNlcnZhYmxlPE1vZGVsRXJyb3J8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0VXBkYXRlRW50cnksXG4gICAgICAgIG1hcChnID0+IGcuZXJyb3IpLFxuICAgICk7XG4gIH1cblxuICBnZXRQYXRjaExvYWRpbmcoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RQYXRjaEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmxvYWRpbmcpLFxuICAgICk7XG4gIH1cblxuICBnZXRQYXRjaElkKCk6IE9ic2VydmFibGU8bnVtYmVyfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdFBhdGNoRW50cnksXG4gICAgICAgIG1hcChnID0+IGcuaWQpLFxuICAgICk7XG4gIH1cblxuICBnZXRQYXRjaE9iamVjdCgpOiBPYnNlcnZhYmxlPFR8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0UGF0Y2hFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vYmplY3QpLFxuICAgICk7XG4gIH1cblxuICBnZXRQYXRjaEVycm9yKCk6IE9ic2VydmFibGU8TW9kZWxFcnJvcnxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RQYXRjaEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmVycm9yKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0RGVsZXRlTG9hZGluZygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdERlbGV0ZUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmxvYWRpbmcpLFxuICAgICk7XG4gIH1cblxuICBnZXREZWxldGVJZCgpOiBPYnNlcnZhYmxlPG51bWJlcnxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3REZWxldGVFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5pZCksXG4gICAgKTtcbiAgfVxuXG4gIGdldERlbGV0ZU9iamVjdCgpOiBPYnNlcnZhYmxlPFR8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0RGVsZXRlRW50cnksXG4gICAgICAgIG1hcChnID0+IGcub2JqZWN0KSxcbiAgICApO1xuICB9XG5cbiAgZ2V0RGVsZXRlRXJyb3IoKTogT2JzZXJ2YWJsZTxNb2RlbEVycm9yfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdERlbGV0ZUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmVycm9yKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0RGVsZXRlQWxsTG9hZGluZygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdERlbGV0ZUFsbEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmxvYWRpbmcpLFxuICAgICk7XG4gIH1cblxuICBnZXREZWxldGVBbGxJZHMoKTogT2JzZXJ2YWJsZTxudW1iZXJbXXxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3REZWxldGVBbGxFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5pZHMpLFxuICAgICk7XG4gIH1cblxuICBnZXREZWxldGVBbGxPYmplY3RzKCk6IE9ic2VydmFibGU8VFtdfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdERlbGV0ZUFsbEVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLm9iamVjdHMpLFxuICAgICk7XG4gIH1cblxuICBnZXREZWxldGVBbGxFcnJvcigpOiBPYnNlcnZhYmxlPE1vZGVsRXJyb3J8bnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0RGVsZXRlQWxsRW50cnksXG4gICAgICAgIG1hcChnID0+IGcuZXJyb3IpLFxuICAgICk7XG4gIH1cblxuICBnZXRRdWVyeUxvYWRpbmcoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RRdWVyeUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmxvYWRpbmcpLFxuICAgICk7XG4gIH1cblxuICBnZXRRdWVyeU9wdGlvbnMoKTogT2JzZXJ2YWJsZTxNb2RlbFF1ZXJ5UGFyYW1zfG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUucGlwZShcbiAgICAgICAgdGhpcy5fbGFzdFF1ZXJ5RW50cnksXG4gICAgICAgIG1hcChnID0+IGcub3B0aW9ucyksXG4gICAgKTtcbiAgfVxuXG4gIGdldFF1ZXJ5T2JqZWN0cygpOiBPYnNlcnZhYmxlPE1vZGVsTGlzdFJlc3VsdDxUPnxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RRdWVyeUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLm9iamVjdHMpLFxuICAgICk7XG4gIH1cblxuICBnZXRRdWVyeUVycm9yKCk6IE9ic2VydmFibGU8TW9kZWxFcnJvcnxudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLnBpcGUoXG4gICAgICAgIHRoaXMuX2xhc3RRdWVyeUVudHJ5LFxuICAgICAgICBtYXAoZyA9PiBnLmVycm9yKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0UXVlcnlIYXNOZXh0KCk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0UXVlcnlFbnRyeSxcbiAgICAgICAgbWFwKGcgPT4gZy5vYmplY3RzICE9IG51bGwgJiYgZy5vYmplY3RzIS5uZXh0ICE9IG51bGwpLFxuICAgICk7XG4gIH1cblxuICBnZXRRdWVyeUN1cnJlbnRTdGFydCgpOiBPYnNlcnZhYmxlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5waXBlKFxuICAgICAgICB0aGlzLl9sYXN0UXVlcnlFbnRyeSxcbiAgICAgICAgZmlsdGVyKGcgPT4gZy5vcHRpb25zICE9IG51bGwpLFxuICAgICAgICBtYXAoZyA9PiBnLm9wdGlvbnMhLnN0YXJ0ICE9IG51bGwgPyBnLm9wdGlvbnMhLnN0YXJ0IDogMSksXG4gICAgKTtcbiAgfVxuXG4gIGdldENyZWF0ZVN1Y2Nlc3MoKTogT2JzZXJ2YWJsZTxNb2RlbENyZWF0ZVN1Y2Nlc3NBY3Rpb248VD4+IHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aW9ucy5waXBlKFxuICAgICAgICBvZlR5cGUodGhpcy5fYWN0aW9uVHlwZXMuQ1JFQVRFX1NVQ0NFU1MpLFxuICAgICk7XG4gIH1cblxuICBnZXRVcGRhdGVTdWNjZXNzKCk6IE9ic2VydmFibGU8TW9kZWxVcGRhdGVTdWNjZXNzQWN0aW9uPFQ+PiB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLlVQREFURV9TVUNDRVNTKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0UGF0Y2hTdWNjZXNzKCk6IE9ic2VydmFibGU8TW9kZWxVcGRhdGVTdWNjZXNzQWN0aW9uPFQ+PiB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLlBBVENIX1NVQ0NFU1MpLFxuICAgICk7XG4gIH1cblxuICBnZXREZWxldGVTdWNjZXNzKCk6IE9ic2VydmFibGU8TW9kZWxEZWxldGVTdWNjZXNzQWN0aW9uPFQ+PiB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLkRFTEVURV9TVUNDRVNTKSxcbiAgICApO1xuICB9XG5cbiAgZ2V0RGVsZXRlQWxsU3VjY2VzcygpOiBPYnNlcnZhYmxlPE1vZGVsRGVsZXRlQWxsU3VjY2Vzc0FjdGlvbjxUPj4ge1xuICAgIHJldHVybiB0aGlzLl9hY3Rpb25zLnBpcGUoXG4gICAgICAgIG9mVHlwZSh0aGlzLl9hY3Rpb25UeXBlcy5ERUxFVEVfQUxMX1NVQ0NFU1MpLFxuICAgICk7XG4gIH1cblxuICBnZXQoaWQ6IG51bWJlcik6IE9ic2VydmFibGU8VD4ge1xuICAgIGNvbnN0IGFjdGlvbiA9IGNyZWF0ZUFjdGlvbjxNb2RlbEdldEFjdGlvbj4oe3R5cGU6IHRoaXMuX2FjdGlvblR5cGVzLkdFVCwgcGF5bG9hZDoge2lkfX0pO1xuICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgY29uc3QgYWN0UmVzdWx0ID0gdGhpcy5fYWN0aW9ucy5waXBlKFxuICAgICAgICBvZlR5cGUodGhpcy5fYWN0aW9uVHlwZXMuR0VUX1NVQ0NFU1MsIHRoaXMuX2FjdGlvblR5cGVzLkdFVF9GQUlMVVJFKSxcbiAgICAgICAgZmlsdGVyKGEgPT4gYS51dWlkID09PSBhY3Rpb24udXVpZCksXG4gICAgKTtcbiAgICByZXR1cm4gYWN0UmVzdWx0LnBpcGUoXG4gICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLl9zdG9yZSksXG4gICAgICAgIHNlbGVjdChzID0+IGNyZWF0ZVNlbGVjdG9yKHRoaXMuX21vZGVsU3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUuZ2V0KShzIGFzIG9iamVjdCkpLFxuICAgICAgICBtYXAoZ2V0cyA9PiBnZXRzLmZpbmQoZyA9PiBnLnV1aWQgPT09IGFjdGlvbi51dWlkKSksXG4gICAgICAgIGZpbHRlcihnZXQgPT4gZ2V0ICE9IG51bGwpLFxuICAgICAgICB0YXAoZ2V0ID0+IHtcbiAgICAgICAgICBpZiAoZ2V0IS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKGdldCEuZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbHRlcihnZXQgPT4gZ2V0IS5vYmplY3QgIT0gbnVsbCksXG4gICAgICAgIG1hcChnZXQgPT4gZ2V0IS5vYmplY3QhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG5cbiAgbGlzdChvcHRpb25zPzogTW9kZWxMaXN0UGFyYW1zKTogT2JzZXJ2YWJsZTxNb2RlbExpc3RSZXN1bHQ8VD4+IHtcbiAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVBY3Rpb248TW9kZWxMaXN0QWN0aW9uPihcbiAgICAgICAge3R5cGU6IHRoaXMuX2FjdGlvblR5cGVzLkxJU1QsIHBheWxvYWQ6IHtwYXJhbXM6IG9wdGlvbnMgfHwge319fSk7XG4gICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICBjb25zdCBhY3RSZXN1bHQgPSB0aGlzLl9hY3Rpb25zLnBpcGUoXG4gICAgICAgIG9mVHlwZSh0aGlzLl9hY3Rpb25UeXBlcy5MSVNUX1NVQ0NFU1MsIHRoaXMuX2FjdGlvblR5cGVzLkxJU1RfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLmxpc3QpKHMgYXMgb2JqZWN0KSksXG4gICAgICAgIG1hcChsaXN0cyA9PiBsaXN0cy5maW5kKGwgPT4gbC51dWlkID09PSBhY3Rpb24udXVpZCkpLFxuICAgICAgICBmaWx0ZXIobGlzdCA9PiBsaXN0ICE9IG51bGwpLFxuICAgICAgICB0YXAobGlzdCA9PiB7XG4gICAgICAgICAgaWYgKGxpc3QhLmVycm9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3IobGlzdCEuZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbHRlcihsaXN0ID0+IGxpc3QhLm9iamVjdHMgIT0gbnVsbCksXG4gICAgICAgIG1hcChsaXN0ID0+IGxpc3QhLm9iamVjdHMhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlKGRhdGE6IFBhcnRpYWw8VD4pOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVBY3Rpb248TW9kZWxDcmVhdGVBY3Rpb248VD4+KHtcbiAgICAgIHR5cGU6IHRoaXMuX2FjdGlvblR5cGVzLkNSRUFURSxcbiAgICAgIHBheWxvYWQ6IHtpdGVtOiBkYXRhfSxcbiAgICB9KTtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgIGNvbnN0IGFjdFJlc3VsdCA9IHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLkNSRUFURV9TVUNDRVNTLCB0aGlzLl9hY3Rpb25UeXBlcy5DUkVBVEVfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLmNyZWF0ZSkocyBhcyBvYmplY3QpKSxcbiAgICAgICAgbWFwKGNyZWF0ZXMgPT4gY3JlYXRlcy5maW5kKGMgPT4gYy51dWlkID09PSBhY3Rpb24udXVpZCkpLFxuICAgICAgICBmaWx0ZXIoY3JlYXRlcyA9PiBjcmVhdGVzICE9IG51bGwpLFxuICAgICAgICB0YXAoY3JlYXRlID0+IHtcbiAgICAgICAgICBpZiAoY3JlYXRlIS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKGNyZWF0ZSEuZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbHRlcihjcmVhdGUgPT4gY3JlYXRlIS5vYmplY3QgIT0gbnVsbCksXG4gICAgICAgIG1hcChjcmVhdGUgPT4gY3JlYXRlIS5vYmplY3QhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlKGRhdGE6IFQpOiBPYnNlcnZhYmxlPFQ+IHtcbiAgICBjb25zdCBhY3Rpb24gPSBjcmVhdGVBY3Rpb248TW9kZWxVcGRhdGVBY3Rpb248VD4+KHtcbiAgICAgIHR5cGU6IHRoaXMuX2FjdGlvblR5cGVzLlVQREFURSxcbiAgICAgIHBheWxvYWQ6IHtpdGVtOiBkYXRhfSxcbiAgICB9KTtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgIGNvbnN0IGFjdFJlc3VsdCA9IHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLlVQREFURV9TVUNDRVNTLCB0aGlzLl9hY3Rpb25UeXBlcy5VUERBVEVfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLnVwZGF0ZSkocyBhcyBvYmplY3QpKSxcbiAgICAgICAgbWFwKHVwZGF0ZXMgPT4gdXBkYXRlcy5maW5kKHUgPT4gdS51dWlkID09PSBhY3Rpb24udXVpZCkpLFxuICAgICAgICBmaWx0ZXIodXBkYXRlcyA9PiB1cGRhdGVzICE9IG51bGwpLFxuICAgICAgICB0YXAodXBkYXRlID0+IHtcbiAgICAgICAgICBpZiAodXBkYXRlIS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHVwZGF0ZSEuZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbHRlcih1cGRhdGUgPT4gdXBkYXRlIS5vYmplY3QgIT0gbnVsbCksXG4gICAgICAgIG1hcCh1cGRhdGUgPT4gdXBkYXRlIS5vYmplY3QhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG5cbiAgcGF0Y2goZGF0YTogVCk6IE9ic2VydmFibGU8VD4ge1xuICAgIGNvbnN0IGFjdGlvbiA9XG4gICAgICAgIGNyZWF0ZUFjdGlvbjxNb2RlbFBhdGNoQWN0aW9uPFQ+Pih7dHlwZTogdGhpcy5fYWN0aW9uVHlwZXMuUEFUQ0gsIHBheWxvYWQ6IHtpdGVtOiBkYXRhfX0pO1xuICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgY29uc3QgYWN0UmVzdWx0ID0gdGhpcy5fYWN0aW9ucy5waXBlKFxuICAgICAgICBvZlR5cGUodGhpcy5fYWN0aW9uVHlwZXMuUEFUQ0hfU1VDQ0VTUywgdGhpcy5fYWN0aW9uVHlwZXMuUEFUQ0hfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLnBhdGNoKShzIGFzIG9iamVjdCkpLFxuICAgICAgICBtYXAocGF0Y2hlcyA9PiBwYXRjaGVzLmZpbmQocCA9PiBwLnV1aWQgPT09IGFjdGlvbi51dWlkKSksXG4gICAgICAgIGZpbHRlcihwYXRjaGVzID0+IHBhdGNoZXMgIT0gbnVsbCksXG4gICAgICAgIHRhcChwYXRjaCA9PiB7XG4gICAgICAgICAgaWYgKHBhdGNoIS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHBhdGNoIS5lcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZmlsdGVyKHBhdGNoID0+IHBhdGNoIS5vYmplY3QgIT0gbnVsbCksXG4gICAgICAgIG1hcChwYXRjaCA9PiBwYXRjaCEub2JqZWN0ISksXG4gICAgICAgIHRha2UoMSksXG4gICAgKTtcbiAgfVxuXG4gIGRlbGV0ZShkYXRhOiBUKTogT2JzZXJ2YWJsZTxUPiB7XG4gICAgY29uc3QgYWN0aW9uID1cbiAgICAgICAgY3JlYXRlQWN0aW9uPE1vZGVsRGVsZXRlQWN0aW9uPFQ+Pih7dHlwZTogdGhpcy5fYWN0aW9uVHlwZXMuREVMRVRFLCBwYXlsb2FkOiB7aXRlbTogZGF0YX19KTtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgIGNvbnN0IGFjdFJlc3VsdCA9IHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLkRFTEVURV9TVUNDRVNTLCB0aGlzLl9hY3Rpb25UeXBlcy5ERUxFVEVfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLmRlbGV0ZSkocyBhcyBvYmplY3QpKSxcbiAgICAgICAgbWFwKGRlbHMgPT4gZGVscy5maW5kKGQgPT4gZC51dWlkID09PSBhY3Rpb24udXVpZCkpLFxuICAgICAgICBmaWx0ZXIoZGVscyA9PiBkZWxzICE9IG51bGwpLFxuICAgICAgICB0YXAoZGVsID0+IHtcbiAgICAgICAgICBpZiAoZGVsIS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKGRlbCEuZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbHRlcihkZWwgPT4gZGVsIS5vYmplY3QgIT0gbnVsbCksXG4gICAgICAgIG1hcChkZWwgPT4gZGVsIS5vYmplY3QhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG5cbiAgZGVsZXRlQWxsKGRhdGE6IFRbXSk6IE9ic2VydmFibGU8VFtdPiB7XG4gICAgY29uc3QgYWN0aW9uID0gY3JlYXRlQWN0aW9uPE1vZGVsRGVsZXRlQWxsQWN0aW9uPFQ+PihcbiAgICAgICAge3R5cGU6IHRoaXMuX2FjdGlvblR5cGVzLkRFTEVURV9BTEwsIHBheWxvYWQ6IHtpdGVtczogZGF0YX19KTtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgIGNvbnN0IGFjdFJlc3VsdCA9IHRoaXMuX2FjdGlvbnMucGlwZShcbiAgICAgICAgb2ZUeXBlKHRoaXMuX2FjdGlvblR5cGVzLkRFTEVURV9BTExfU1VDQ0VTUywgdGhpcy5fYWN0aW9uVHlwZXMuREVMRVRFX0FMTF9GQUlMVVJFKSxcbiAgICAgICAgZmlsdGVyKGEgPT4gYS51dWlkID09PSBhY3Rpb24udXVpZCksXG4gICAgKTtcbiAgICByZXR1cm4gYWN0UmVzdWx0LnBpcGUoXG4gICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aGlzLl9zdG9yZSksXG4gICAgICAgIHNlbGVjdChzID0+IGNyZWF0ZVNlbGVjdG9yKHRoaXMuX21vZGVsU3RhdGUsIChzdGF0ZSkgPT4gc3RhdGUuZGVsZXRlQWxsKShzIGFzIG9iamVjdCkpLFxuICAgICAgICBtYXAoZGVsZXRlQWxscyA9PiBkZWxldGVBbGxzLmZpbmQoZCA9PiBkLnV1aWQgPT09IGFjdGlvbi51dWlkKSksXG4gICAgICAgIGZpbHRlcihkZWxldGVBbGxzID0+IGRlbGV0ZUFsbHMgIT0gbnVsbCksXG4gICAgICAgIHRhcChkZWxldGVBbGwgPT4ge1xuICAgICAgICAgIGlmIChkZWxldGVBbGwhLmVycm9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3IoZGVsZXRlQWxsIS5lcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZmlsdGVyKGRlbGV0ZUFsbCA9PiBkZWxldGVBbGwhLm9iamVjdHMgIT0gbnVsbCksXG4gICAgICAgIG1hcChkZWxldGVBbGwgPT4gZGVsZXRlQWxsIS5vYmplY3RzISksXG4gICAgICAgIHRha2UoMSksXG4gICAgKTtcbiAgfVxuXG4gIHF1ZXJ5KG9wdGlvbnM6IE1vZGVsUXVlcnlQYXJhbXMpOiBPYnNlcnZhYmxlPE1vZGVsTGlzdFJlc3VsdDxUPj4ge1xuICAgIGNvbnN0IGFjdGlvbiA9IGNyZWF0ZUFjdGlvbjxNb2RlbFF1ZXJ5QWN0aW9uPihcbiAgICAgICAge3R5cGU6IHRoaXMuX2FjdGlvblR5cGVzLlFVRVJZLCBwYXlsb2FkOiB7cGFyYW1zOiBvcHRpb25zIHx8IHt9fX0pO1xuICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgY29uc3QgYWN0UmVzdWx0ID0gdGhpcy5fYWN0aW9ucy5waXBlKFxuICAgICAgICBvZlR5cGUodGhpcy5fYWN0aW9uVHlwZXMuUVVFUllfU1VDQ0VTUywgdGhpcy5fYWN0aW9uVHlwZXMuUVVFUllfRkFJTFVSRSksXG4gICAgICAgIGZpbHRlcihhID0+IGEudXVpZCA9PT0gYWN0aW9uLnV1aWQpLFxuICAgICk7XG4gICAgcmV0dXJuIGFjdFJlc3VsdC5waXBlKFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5fc3RvcmUpLFxuICAgICAgICBzZWxlY3QocyA9PiBjcmVhdGVTZWxlY3Rvcih0aGlzLl9tb2RlbFN0YXRlLCAoc3RhdGUpID0+IHN0YXRlLnF1ZXJ5KShzIGFzIG9iamVjdCkpLFxuICAgICAgICBtYXAocXVlcmllcyA9PiBxdWVyaWVzLmZpbmQocSA9PiBxLnV1aWQgPT09IGFjdGlvbi51dWlkKSksXG4gICAgICAgIGZpbHRlcihxdWVyaWVzID0+IHF1ZXJpZXMgIT0gbnVsbCksXG4gICAgICAgIHRhcChxdWVyeSA9PiB7XG4gICAgICAgICAgaWYgKHF1ZXJ5IS5lcnJvciAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHF1ZXJ5IS5lcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgZmlsdGVyKHF1ZXJ5ID0+IHF1ZXJ5IS5vYmplY3RzICE9IG51bGwpLFxuICAgICAgICBtYXAocXVlcnkgPT4gcXVlcnkhLm9iamVjdHMhKSxcbiAgICAgICAgdGFrZSgxKSxcbiAgICApO1xuICB9XG59XG4iXX0=