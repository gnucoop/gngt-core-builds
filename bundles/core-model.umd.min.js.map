{"version":3,"file":"core-model.umd.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/core/model/model-actions.ts","../../src/core/model/model-reducer.ts","../../src/core/model/reducers.ts","../../src/core/model/model-generic-action.ts","../../src/core/model/utils.ts","../../src/core/model/model-effects.ts","../../src/core/model/model-manager.ts","../../src/core/model/model-options-token.ts","../../src/core/model/model-service.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Model, ModelListParams, ModelListResult, ModelQueryParams} from '@gngt/core/common';\nimport {type} from '@gngt/core/reducers';\n\nimport {ModelGenericAction} from './model-generic-action';\n\nexport interface ModelActionTypes {\n  GET: string;\n  GET_FAILURE: string;\n  GET_SUCCESS: string;\n  LIST: string;\n  LIST_SUCCESS: string;\n  LIST_FAILURE: string;\n  CREATE: string;\n  CREATE_SUCCESS: string;\n  CREATE_FAILURE: string;\n  UPDATE: string;\n  UPDATE_SUCCESS: string;\n  UPDATE_FAILURE: string;\n  PATCH: string;\n  PATCH_SUCCESS: string;\n  PATCH_FAILURE: string;\n  DELETE: string;\n  DELETE_SUCCESS: string;\n  DELETE_FAILURE: string;\n  DELETE_ALL: string;\n  DELETE_ALL_SUCCESS: string;\n  DELETE_ALL_FAILURE: string;\n  QUERY: string;\n  QUERY_SUCCESS: string;\n  QUERY_FAILURE: string;\n}\n\nexport function generateModelActionTypes(typeName: string): ModelActionTypes {\n  return {\n    LIST: type(`[${typeName}] List`),\n    LIST_FAILURE: type(`[${typeName}] List failure`),\n    LIST_SUCCESS: type(`[${typeName}] List success`),\n    GET: type(`[${typeName}] Get`),\n    GET_FAILURE: type(`[${typeName}] Get failure`),\n    GET_SUCCESS: type(`[${typeName}] Get success`),\n    CREATE: type(`[${typeName}] Create`),\n    CREATE_FAILURE: type(`[${typeName}] Create failure`),\n    CREATE_SUCCESS: type(`[${typeName}] Create success`),\n    UPDATE: type(`[${typeName}] Update`),\n    UPDATE_FAILURE: type(`[${typeName}] Update failure`),\n    UPDATE_SUCCESS: type(`[${typeName}] Update success`),\n    PATCH: type(`[${typeName}] Patch`),\n    PATCH_FAILURE: type(`[${typeName}] Patch failure`),\n    PATCH_SUCCESS: type(`[${typeName}] Patch success`),\n    DELETE: type(`[${typeName}] Delete`),\n    DELETE_FAILURE: type(`[${typeName}] Delete failure`),\n    DELETE_SUCCESS: type(`[${typeName}] Delete success`),\n    DELETE_ALL: type(`[${typeName}] Delete all`),\n    DELETE_ALL_FAILURE: type(`[${typeName}] Delete all failure`),\n    DELETE_ALL_SUCCESS: type(`[${typeName}] Delete all success`),\n    QUERY: type(`[${typeName}] Query`),\n    QUERY_FAILURE: type(`[${typeName}] Query failure`),\n    QUERY_SUCCESS: type(`[${typeName}] Query success`),\n  };\n}\n\nexport abstract class ModelBaseAction implements ModelGenericAction {\n  abstract type: string;\n  uuid: string;\n  constructor(public payload: any) { }\n}\n\nexport abstract class ModelGetAction extends ModelBaseAction {\n  constructor(public payload: {id: number}) { super(payload); }\n}\nexport abstract class ModelGetSuccessAction<T extends Model> extends ModelBaseAction  {\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelGetFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelListAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {params: ModelListParams}) { super(payload); }\n}\nexport abstract class ModelListSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {result: ModelListResult<T>}) { super(payload); }\n}\nexport abstract class ModelListFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelCreateAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelCreateSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelCreateFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelUpdateAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelUpdateSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelUpdateFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelPatchAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelPatchSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelPatchFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelDeleteAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelDeleteSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {item: T}) { super(payload); }\n}\nexport abstract class ModelDeleteFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelDeleteAllAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {items: T[]}) { super(payload); }\n}\nexport abstract class ModelDeleteAllSuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {items: T[]}) { super(payload); }\n}\nexport abstract class ModelDeleteAllFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n\nexport abstract class ModelQueryAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {params: ModelQueryParams}) { super(payload); }\n}\nexport abstract class ModelQuerySuccessAction<T extends Model> extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {result: ModelListResult<T>}) { super(payload); }\n}\nexport abstract class ModelQueryFailureAction extends ModelBaseAction {\n  abstract type: string;\n  constructor(public payload: {error: any}) { super(payload); }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  Model, ModelGetParams, ModelListParams, ModelListResult, ModelQueryParams\n} from '@gngt/core/common';\nimport * as ModelActions from './model-actions';\n\nconst stateQueueLimit = 20;\n\nexport interface ModelGetState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  options: ModelGetParams;\n  id: number | null;\n  object: M | null;\n  error: any;\n}\n\nexport interface ModelListState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  options: ModelListParams;\n  objects: ModelListResult<M> | null;\n  error: any;\n}\n\nexport interface ModelCreateState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  object: M | null;\n  error: any;\n}\n\nexport interface ModelUpdateState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  id: number | null;\n  object: M | null;\n  error: any;\n}\n\nexport interface ModelPatchState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  id: number | null;\n  object: M | null;\n  error: any;\n}\n\nexport interface ModelDeleteState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  id: number | null;\n  object: M | null;\n  error: any;\n}\n\nexport interface ModelDeleteAllState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  ids: number[] | null;\n  objects: M[] | null;\n  error: any;\n}\n\nexport interface ModelQueryState<M extends Model> {\n  uuid: string;\n  loading: boolean;\n  options: ModelQueryParams | null;\n  objects: ModelListResult<M> | null;\n  error: any;\n}\n\nexport interface State<M extends Model> {\n  get: ModelGetState<M>[];\n  list: ModelListState<M>[];\n  create: ModelCreateState<M>[];\n  update: ModelUpdateState<M>[];\n  patch: ModelPatchState<M>[];\n  delete: ModelDeleteState<M>[];\n  deleteAll: ModelDeleteAllState<M>[];\n  query: ModelQueryState<M>[];\n}\n\nexport function generateInitialModelState<M extends Model>(): State<M> {\n  return {\n    get: [],\n    list: [],\n    create: [],\n    update: [],\n    patch: [],\n    delete: [],\n    deleteAll: [],\n    query: [],\n  };\n}\n\nexport function modelReducer<M extends Model>(\n  state: State<M>,\n  action: ModelActions.ModelBaseAction,\n  actionTypes: ModelActions.ModelActionTypes\n): State<M> {\n  switch (action.type) {\n\n    case actionTypes.GET:\n    return {\n      ...state,\n      get: [{\n        uuid: action.uuid,\n        loading: true,\n        options: {id: null},\n        id: (<ModelActions.ModelGetAction>action).payload.id,\n        object: null,\n        error: null\n      }, ...state.get.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.GET_SUCCESS:\n    const successGetIdx = state.get.findIndex(g => g.uuid === action.uuid);\n    if (successGetIdx >= 0) {\n      return {\n        ...state,\n        get: [...state.get.slice(0, successGetIdx), {\n          ...state.get[successGetIdx],\n          loading: false,\n          object: (<ModelActions.ModelGetSuccessAction<M>>action).payload.item,\n          error: null\n        }, ...state.get.slice(successGetIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.GET_FAILURE:\n    const failureGetIdx = state.get.findIndex(g => g.uuid === action.uuid);\n    if (failureGetIdx >= 0) {\n      return {\n        ...state,\n        get: [...state.get.slice(0, failureGetIdx), {\n          ...state.get[failureGetIdx],\n          loading: false,\n          object: null,\n          error: (<ModelActions.ModelGetFailureAction>action).payload.error\n        }, ...state.get.slice(failureGetIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.LIST:\n    return {\n      ...state,\n      list: [{\n        uuid: action.uuid,\n        loading: true,\n        options: (<ModelActions.ModelListAction>action).payload.params,\n        objects: null,\n        error: null\n      }, ...state.list.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.LIST_SUCCESS:\n    const successListIdx = state.list.findIndex(g => g.uuid === action.uuid);\n    if (successListIdx >= 0) {\n      return {\n        ...state,\n        list: [...state.list.slice(0, successListIdx), {\n          ...state.list[successListIdx],\n          loading: false,\n          objects: (<ModelActions.ModelListSuccessAction<M>>action).payload.result,\n          error: null\n        }, ...state.list.slice(successListIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.LIST_FAILURE:\n    const failureListIdx = state.list.findIndex(g => g.uuid === action.uuid);\n    if (failureListIdx >= 0) {\n      return {\n        ...state,\n        list: [...state.list.slice(0, failureListIdx), {\n          ...state.list[failureListIdx],\n          loading: false,\n          objects: null,\n          error: (<ModelActions.ModelListFailureAction>action).payload.error\n        }, ...state.list.slice(failureListIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.CREATE:\n    return {\n      ...state,\n      create: [{\n        uuid: action.uuid,\n        loading: true,\n        object: (<ModelActions.ModelCreateAction<M>>action).payload.item,\n        error: null\n      }, ...state.create.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.CREATE_SUCCESS:\n    const successCreateIdx = state.create.findIndex(g => g.uuid === action.uuid);\n    if (successCreateIdx >= 0) {\n      return {\n        ...state,\n        create: [...state.create.slice(0, successCreateIdx), {\n          ...state.create[successCreateIdx],\n          loading: false,\n          object: (<ModelActions.ModelCreateSuccessAction<M>>action).payload.item,\n          error: null\n        }, ...state.create.slice(successCreateIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.CREATE_FAILURE:\n    const failureCreateIdx = state.create.findIndex(g => g.uuid === action.uuid);\n    if (failureCreateIdx >= 0) {\n      return {\n        ...state,\n        create: [...state.create.slice(0, failureCreateIdx), {\n          ...state.create[failureCreateIdx],\n          loading: false,\n          object: null,\n          error: (<ModelActions.ModelCreateFailureAction>action).payload.error\n        }, ...state.create.slice(failureCreateIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.UPDATE:\n    return {\n      ...state,\n      update: [{\n        uuid: action.uuid,\n        loading: true,\n        id: (<ModelActions.ModelUpdateAction<M>>action).payload.item.id,\n        object: (<ModelActions.ModelUpdateAction<M>>action).payload.item,\n        error: null\n      }, ...state.update.slice(0, stateQueueLimit - 1)]\n    };\n\n    case actionTypes.UPDATE_SUCCESS:\n    const successUpdateIdx = state.update.findIndex(g => g.uuid === action.uuid);\n    if (successUpdateIdx >= 0) {\n      return {\n        ...state,\n        update: [...state.update.slice(0, successUpdateIdx), {\n          ...state.update[successUpdateIdx],\n          loading: false,\n          object: (<ModelActions.ModelUpdateSuccessAction<M>>action).payload.item,\n          error: null\n        }, ...state.update.slice(successUpdateIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.UPDATE_FAILURE:\n    const failureUpdateIdx = state.update.findIndex(g => g.uuid === action.uuid);\n    if (failureUpdateIdx >= 0) {\n      return {\n        ...state,\n        update: [...state.update.slice(0, failureUpdateIdx), {\n          ...state.update[failureUpdateIdx],\n          loading: false,\n          object: null,\n          error: (<ModelActions.ModelUpdateFailureAction>action).payload.error\n        }, ...state.update.slice(failureUpdateIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.PATCH:\n    return {\n      ...state,\n      patch: [{\n        uuid: action.uuid,\n        loading: true,\n        id: (<ModelActions.ModelPatchAction<M>>action).payload.item.id,\n        object: (<ModelActions.ModelPatchAction<M>>action).payload.item,\n        error: null\n      }, ...state.patch.slice(0, stateQueueLimit - 1)]\n    };\n\n    case actionTypes.PATCH_SUCCESS:\n    const successPatchIdx = state.patch.findIndex(g => g.uuid === action.uuid);\n    if (successPatchIdx >= 0) {\n      return {\n        ...state,\n        patch: [...state.patch.slice(0, successPatchIdx), {\n          ...state.patch[successPatchIdx],\n          loading: false,\n          object: (<ModelActions.ModelPatchSuccessAction<M>>action).payload.item,\n          error: null\n        }, ...state.patch.slice(successPatchIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.PATCH_FAILURE:\n    const failurePatchIdx = state.patch.findIndex(g => g.uuid === action.uuid);\n    if (failurePatchIdx >= 0) {\n      return {\n        ...state,\n        patch: [...state.patch.slice(0, failurePatchIdx), {\n          ...state.patch[failurePatchIdx],\n          loading: false,\n          object: null,\n          error: (<ModelActions.ModelPatchFailureAction>action).payload.error\n        }, ...state.patch.slice(failurePatchIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.DELETE:\n    return {\n      ...state,\n      delete: [{\n        uuid: action.uuid,\n        loading: true,\n        id: (<ModelActions.ModelDeleteAction<M>>action).payload.item.id,\n        object: null,\n        error: null\n      }, ...state.delete.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.DELETE_SUCCESS:\n    const successDeleteIdx = state.delete.findIndex(g => g.uuid === action.uuid);\n    if (successDeleteIdx >= 0) {\n      return {\n        ...state,\n        delete: [...state.delete.slice(0, successDeleteIdx), {\n          ...state.delete[successDeleteIdx],\n          loading: false,\n          object: (<ModelActions.ModelDeleteSuccessAction<M>>action).payload.item,\n          error: null\n        }, ...state.delete.slice(successDeleteIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.DELETE_FAILURE:\n    const failureDeleteIdx = state.delete.findIndex(g => g.uuid === action.uuid);\n    if (failureDeleteIdx >= 0) {\n      return {\n        ...state,\n        delete: [...state.delete.slice(0, failureDeleteIdx), {\n          ...state.delete[failureDeleteIdx],\n          loading: false,\n          object: null,\n          error: (<ModelActions.ModelDeleteFailureAction>action).payload.error\n        }, ...state.delete.slice(failureDeleteIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.DELETE_ALL:\n    return {\n      ...state,\n      deleteAll: [{\n        uuid: action.uuid,\n        loading: true,\n        ids: (<ModelActions.ModelDeleteAllAction<M>>action).payload.items.map(i => i.id),\n        objects: null,\n        error: null\n      }, ...state.deleteAll.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.DELETE_ALL_SUCCESS:\n    const successDeleteAllIdx = state.deleteAll.findIndex(g => g.uuid === action.uuid);\n    if (successDeleteAllIdx >= 0) {\n      return {\n        ...state,\n        deleteAll: [...state.deleteAll.slice(0, successDeleteAllIdx), {\n          ...state.deleteAll[successDeleteAllIdx],\n          loading: false,\n          objects: (<ModelActions.ModelDeleteAllSuccessAction<M>>action).payload.items,\n          error: null\n        }, ...state.deleteAll.slice(successDeleteAllIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.DELETE_ALL_FAILURE:\n    const failureDeleteAllIdx = state.deleteAll.findIndex(g => g.uuid === action.uuid);\n    if (failureDeleteAllIdx >= 0) {\n      return {\n        ...state,\n        deleteAll: [...state.deleteAll.slice(0, failureDeleteAllIdx), {\n          ...state.deleteAll[failureDeleteAllIdx],\n          loading: false,\n          objects: null,\n          error: (<ModelActions.ModelDeleteAllFailureAction>action).payload.error\n        }, ...state.deleteAll.slice(failureDeleteAllIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.QUERY:\n    return {\n      ...state,\n      query: [{\n        uuid: action.uuid,\n        loading: true,\n        options: (<ModelActions.ModelQueryAction>action).payload.params,\n        objects: null,\n        error: null\n      }, ...state.query.slice(0, stateQueueLimit - 1)],\n    };\n\n    case actionTypes.QUERY_SUCCESS:\n    const successQueryIdx = state.query.findIndex(g => g.uuid === action.uuid);\n    if (successQueryIdx >= 0) {\n      return {\n        ...state,\n        query: [...state.query.slice(0, successQueryIdx), {\n          ...state.query[successQueryIdx],\n          loading: false,\n          options: {...state.query[successQueryIdx].options!},\n          objects: (<ModelActions.ModelQuerySuccessAction<M>>action).payload.result,\n          error: null\n        }, ...state.query.slice(successQueryIdx + 1)],\n      };\n    }\n    return state;\n\n    case actionTypes.QUERY_FAILURE:\n    const failureQueryIdx = state.query.findIndex(g => g.uuid === action.uuid);\n    if (failureQueryIdx >= 0) {\n      return {\n        ...state,\n        query: [...state.query.slice(0, failureQueryIdx), {\n          ...state.query[failureQueryIdx],\n          loading: false,\n          options: {...state.query[failureQueryIdx].options!},\n          objects: null,\n          error: (<ModelActions.ModelQueryFailureAction>action).payload.error\n        }, ...state.query.slice(failureQueryIdx + 1)],\n      };\n    }\n    return state;\n\n    default:\n    return state;\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Model} from '@gngt/core/common';\n\nimport {State} from './model-reducer';\n\nexport * from './model-reducer';\n\nexport interface ModelPackageState<M extends Model> {\n  [model: string]: State<M>;\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Action} from '@ngrx/store';\n\nexport class ModelGenericAction implements Action {\n  type: string;\n  uuid: string;\n  constructor(public payload: any) { }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Action} from '@ngrx/store';\n\nimport {v4} from 'uuid';\n\nimport {ModelGenericAction} from './model-generic-action';\n\nexport function createAction<A extends Action>(params: {\n  type: string,\n  payload?: any,\n  uuid?: string,\n}): A {\n  const action = new ModelGenericAction(params.payload);\n  action.type = params.type;\n  action.uuid = params.uuid || v4();\n  return action as any;\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {of as obsOf, Observable} from 'rxjs';\nimport {catchError, map, mergeMap} from 'rxjs/operators';\n\nimport {Action} from '@ngrx/store';\nimport {Actions, createEffect, ofType} from '@ngrx/effects';\n\nimport {Model, ModelListResult} from '@gngt/core/common';\nimport * as ModelActions from './model-actions';\nimport {ModelManager} from './model-manager';\nimport {ModelService} from './model-service';\nimport * as fromModel from './model-reducer';\nimport {createAction} from './utils';\n\nexport abstract class ModelEffects<\n    M extends Model,\n    S extends fromModel.State<M>,\n    A extends Action,\n    AT extends ModelActions.ModelActionTypes> {\n\n  protected readonly modelGet$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelGetAction>(this._actionTypes.GET),\n    mergeMap(action => this._manager.get(action.payload.id).pipe(\n      map((item: M) => createAction<A>({\n        type: this._actionTypes.GET_SUCCESS,\n        payload: {item},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.GET_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelList$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelListAction>(this._actionTypes.LIST),\n    mergeMap(action => this._manager.list(action.payload.params).pipe(\n      map((result: ModelListResult<M>) => createAction<A>({\n        type: this._actionTypes.LIST_SUCCESS,\n        payload: {result},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.LIST_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelCreate$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelCreateAction<M>>(this._actionTypes.CREATE),\n    mergeMap(action => this._manager.create(action.payload.item).pipe(\n      map((item: M) => createAction<A>({\n        type: this._actionTypes.CREATE_SUCCESS,\n        payload: {item},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.CREATE_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelUpdate$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelUpdateAction<M>>(this._actionTypes.UPDATE),\n    mergeMap(action => this._manager.update(action.payload.item.id, action.payload.item).pipe(\n      map((item: M) => createAction<A>({\n        type: this._actionTypes.UPDATE_SUCCESS,\n        payload: {item},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.CREATE_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelPatch$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelPatchAction<M>>(this._actionTypes.PATCH),\n    mergeMap(action => this._manager.patch(action.payload.item.id, action.payload.item).pipe(\n      map((item: M) => createAction<A>({\n        type: this._actionTypes.CREATE_SUCCESS,\n        payload: {item},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.CREATE_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelDelete$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelDeleteAction<M>>(this._actionTypes.DELETE),\n    mergeMap(action => this._manager.delete(action.payload.item.id).pipe(\n      map(() => createAction<A>({\n        type: this._actionTypes.DELETE_SUCCESS,\n        payload: {item: action.payload.item},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.DELETE_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelDeleteAll$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelDeleteAllAction<M>>(this._actionTypes.DELETE_ALL),\n    mergeMap(action => this._manager.deleteAll(action.payload.items.map(i => i.id)).pipe(\n      map(() => createAction<A>({\n        type: this._actionTypes.DELETE_ALL_SUCCESS,\n        payload: {items: action.payload.items},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.DELETE_ALL_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  protected readonly modelQuery$: Observable<A> = createEffect(() => this._actions.pipe(\n    ofType<ModelActions.ModelQueryAction>(this._actionTypes.QUERY),\n    mergeMap(action => this._manager.query(action.payload.params).pipe(\n      map((result: ModelListResult<M>) => createAction<A>({\n        type: this._actionTypes.QUERY_SUCCESS,\n        payload: {result},\n        uuid: action.uuid\n      })),\n      catchError(error => obsOf(createAction<A>({\n        type: this._actionTypes.QUERY_FAILURE,\n        payload: {error},\n        uuid: action.uuid\n      }))),\n    ))\n  ));\n\n  constructor(\n    protected _actions: Actions,\n    protected _service: ModelService<M, S, AT>,\n    protected _manager: ModelManager<M>,\n    private _actionTypes: AT,\n  ) { }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {HttpClient} from '@angular/common/http';\nimport {Optional} from '@angular/core';\n\nimport {Observable} from 'rxjs';\n\nimport {\n  Model, ModelListParams, ModelListResult, ModelManager as BaseModelManager, ModelQueryParams\n} from '@gngt/core/common';\nimport {SyncService} from '@gngt/core/sync';\nimport {ModelOptions} from './model-options';\n\n\nexport abstract class ModelManager<M extends Model> extends BaseModelManager {\n  get endPoint(): string { return this._endPoint; }\n\n  private _baseUrl: string;\n  get baseUrl(): string { return this._baseUrl; }\n\n  private _useTrailingSlash = false;\n\n  constructor(\n    config: ModelOptions, private _endPoint: string,\n    protected _http: HttpClient, @Optional() syncService?: SyncService,\n  ) {\n    super();\n    this._baseUrl = `${config.baseApiUrl}${this._endPoint}`;\n    this._useTrailingSlash = config.addTrailingSlash != null\n      ? config.addTrailingSlash\n      : false;\n    if (syncService != null && config.syncModel) {\n      if (config.tableName == null) {\n        throw new Error(`Table name must be set for model ${this._endPoint}`);\n      }\n      syncService.registerSyncModel(this._baseUrl, config.tableName);\n    }\n  }\n\n  get(id: number): Observable<M> {\n    return this._http.get<M>(this._getObjectUrl(id));\n  }\n\n  list(options?: ModelListParams): Observable<ModelListResult<M>> {\n    const params = this._listParamsToQueryParameters(options);\n    return this._http.get<ModelListResult<M>>(`${this._getListUrl()}${params}`);\n  }\n\n  create(data: M): Observable<M> {\n    return this._http.post<M>(this._getListUrl(), data);\n  }\n\n  update(id: number, data: M): Observable<M> {\n    return this._http.put<M>(this._getObjectUrl(id), data);\n  }\n\n  patch(id: number, data: M): Observable<M> {\n    return this._http.patch<M>(this._getObjectUrl(id), data);\n  }\n\n  delete(id: number): Observable<M> {\n    return this._http.delete<M>(this._getObjectUrl(id));\n  }\n\n  deleteAll(ids: number[]): Observable<M> {\n    let url = `${this._baseUrl}/delete_all`;\n    if (this._useTrailingSlash) {\n      url = `${url}/`;\n    }\n    return this._http.post<M>(url, {ids});\n  }\n\n  query(params: ModelQueryParams): Observable<ModelListResult<M>> {\n    let url = `${this._baseUrl}/query`;\n    if (this._useTrailingSlash) {\n      url = `${url}/`;\n    }\n    return this._http.post<ModelListResult<M>>(url, params);\n  }\n\n  private _getObjectUrl(id: number): string {\n    let url = `${this._baseUrl}/${id}`;\n    if (this._useTrailingSlash) {\n      url = `${url}/`;\n    }\n    return url;\n  }\n\n  private _getListUrl(): string {\n    let url = this._baseUrl;\n    if (this._useTrailingSlash) {\n      url = `${url}/`;\n    }\n    return url;\n  }\n\n  private _listParamsToQueryParameters(options?: ModelListParams): string {\n    let params = '';\n    const paramsArray: string[] = [];\n    if (options) {\n      if (options.limit) {\n        paramsArray.push(`limit=${options.limit}`);\n      }\n      if (options.start) {\n        paramsArray.push(`start=${options.start}`);\n      }\n      if (options.sort) {\n        const props = Object.keys(options.sort);\n        paramsArray.push(`sort=${props.map(p => `${p}:${options.sort![p]}`).join(',')}`);\n      }\n      if (options.fields) {\n        paramsArray.push(`fields=${options.fields.join(',')}`);\n      }\n      if (options.joins) {\n        paramsArray.push(`joins=${options.joins.map(j => {\n          const join = `${j.model}.${j.property}`;\n          if (j.fields) {\n            return `${join}.${j.fields.join(';')}`;\n          }\n          return join;\n        }).join(',')}`);\n      }\n      if (paramsArray.length > 0) {\n        params = `?${paramsArray.join('&')}`;\n      }\n    }\n    return params;\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {InjectionToken} from '@angular/core';\n\nimport {ModelOptions} from './model-options';\n\n\nexport const MODEL_OPTIONS: InjectionToken<ModelOptions> =\n  new InjectionToken<ModelOptions>('MODEL_OPTIONS', {\n    providedIn: 'root',\n    factory: () => ({\n      baseApiUrl: '/'\n    })\n  });\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {Observable, pipe, throwError, UnaryFunction} from 'rxjs';\nimport {filter, map, tap, switchMap} from 'rxjs/operators';\n\nimport {Actions, ofType} from '@ngrx/effects';\nimport {createSelector, createFeatureSelector, MemoizedSelector, select, Store} from '@ngrx/store';\n\nimport * as fromRoot from '@gngt/core/reducers';\n\nimport {\n  Model, ModelGetParams, ModelListParams, ModelListResult, ModelQueryParams\n} from '@gngt/core/common';\nimport * as ModelActions from './model-actions';\nimport {ModelGenericAction} from './model-generic-action';\nimport * as fromModel from './reducers';\nimport {createAction} from './utils';\n\nexport abstract class ModelService<\n  T extends Model,\n  S extends fromModel.State<T>,\n  A extends ModelActions.ModelActionTypes> {\n  protected _modelState: MemoizedSelector<object, S>;\n\n  private _lastGetEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelGetState<T>>>;\n  private _lastListEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelListState<T>>>;\n  private _lastCreateEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelCreateState<T>>>;\n  private _lastPatchEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelPatchState<T>>>;\n  private _lastUpdateEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelUpdateState<T>>>;\n  private _lastDeleteEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelDeleteState<T>>>;\n  private _lastDeleteAllEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelDeleteAllState<T>>>;\n  private _lastQueryEntry: UnaryFunction<\n    Observable<fromRoot.State>, Observable<fromModel.ModelQueryState<T>>>;\n\n  constructor(\n    protected _store: Store<fromRoot.State>,\n    private _actions: Actions<ModelGenericAction>,\n    private _actionTypes: A,\n    statePrefixes: [string, string]\n  ) {\n    const packageState = createFeatureSelector(statePrefixes[0]);\n    this._modelState = createSelector(packageState, s => <S>(<any>s)[statePrefixes[1]]);\n\n    this._lastGetEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.get)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastListEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.list)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastCreateEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.create)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastPatchEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.patch)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastUpdateEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.update)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastDeleteEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.delete)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastDeleteAllEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.deleteAll)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n    this._lastQueryEntry = pipe(\n      select(createSelector(this._modelState, (state) => state.query)),\n      filter(g => g.length > 0),\n      map(g => g[0]),\n    );\n  }\n\n  getGetLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastGetEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getGetOptions(): Observable<ModelGetParams> {\n    return this._store.pipe(\n      this._lastGetEntry,\n      map(g => g.options),\n    );\n  }\n\n  getGetId(): Observable<number | null> {\n    return this._store.pipe(\n      this._lastGetEntry,\n      map(g => g.id),\n    );\n  }\n\n  getGetObject(): Observable<T | null> {\n    return this._store.pipe(\n      this._lastGetEntry,\n      map(g => g.object),\n    );\n  }\n\n  getGetError(): Observable<any> {\n    return this._store.pipe(\n      this._lastGetEntry,\n      map(g => g.error),\n    );\n  }\n\n  getListLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastListEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getListOptions(): Observable<ModelListParams> {\n    return this._store.pipe(\n      this._lastListEntry,\n      map(g => g.options),\n    );\n  }\n\n  getListObjects(): Observable<ModelListResult<T> | null> {\n    return this._store.pipe(\n      this._lastListEntry,\n      map(g => g.objects),\n    );\n  }\n\n  getListError(): Observable<any> {\n    return this._store.pipe(\n      this._lastListEntry,\n      map(g => g.error),\n    );\n  }\n\n  getListHasNext(): Observable<any> {\n    return this._store.pipe(\n      this._lastListEntry,\n      filter(g => g.objects != null),\n      map(g => g.objects!.next),\n    );\n  }\n\n  getListCurrentStart(): Observable<any> {\n    return this._store.pipe(\n      this._lastListEntry,\n      filter(g => g.options != null),\n      map(g => g.options!.start != null ? g.options!.start : 1),\n    );\n  }\n\n  getCreateLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastCreateEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getCreateObject(): Observable<T | null> {\n    return this._store.pipe(\n      this._lastCreateEntry,\n      map(g => g.object),\n    );\n  }\n\n  getCreateError(): Observable<any> {\n    return this._store.pipe(\n      this._lastCreateEntry,\n      map(g => g.error),\n    );\n  }\n\n  getUpdateLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastUpdateEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getUpdateId(): Observable<number | null> {\n    return this._store.pipe(\n      this._lastUpdateEntry,\n      map(g => g.id),\n    );\n  }\n\n  getUpdateObject(): Observable<T | null> {\n    return this._store.pipe(\n      this._lastUpdateEntry,\n      map(g => g.object),\n    );\n  }\n\n  getUpdateError(): Observable<any> {\n    return this._store.pipe(\n      this._lastUpdateEntry,\n      map(g => g.error),\n    );\n  }\n\n  getPatchLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastPatchEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getPatchId(): Observable<number | null> {\n    return this._store.pipe(\n      this._lastPatchEntry,\n      map(g => g.id),\n    );\n  }\n\n  getPatchObject(): Observable<T | null> {\n    return this._store.pipe(\n      this._lastPatchEntry,\n      map(g => g.object),\n    );\n  }\n\n  getPatchError(): Observable<any> {\n    return this._store.pipe(\n      this._lastPatchEntry,\n      map(g => g.error),\n    );\n  }\n\n  getDeleteLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastDeleteEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getDeleteId(): Observable<number | null> {\n    return this._store.pipe(\n      this._lastDeleteEntry,\n      map(g => g.id),\n    );\n  }\n\n  getDeleteObject(): Observable<T | null> {\n    return this._store.pipe(\n      this._lastDeleteEntry,\n      map(g => g.object),\n    );\n  }\n\n  getDeleteError(): Observable<any> {\n    return this._store.pipe(\n      this._lastDeleteEntry,\n      map(g => g.error),\n    );\n  }\n\n  getDeleteAllLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastDeleteAllEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getDeleteAllIds(): Observable<number[] | null> {\n    return this._store.pipe(\n      this._lastDeleteAllEntry,\n      map(g => g.ids),\n    );\n  }\n\n  getDeleteAllObjects(): Observable<T[] | null> {\n    return this._store.pipe(\n      this._lastDeleteAllEntry,\n      map(g => g.objects),\n    );\n  }\n\n  getDeleteAllError(): Observable<any> {\n    return this._store.pipe(\n      this._lastDeleteAllEntry,\n      map(g => g.error),\n    );\n  }\n\n  getQueryLoading(): Observable<boolean> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      map(g => g.loading),\n    );\n  }\n\n  getQueryOptions(): Observable<ModelQueryParams | null> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      map(g => g.options),\n    );\n  }\n\n  getQueryObjects(): Observable<ModelListResult<T> | null> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      map(g => g.objects),\n    );\n  }\n\n  getQueryError(): Observable<any> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      map(g => g.error),\n    );\n  }\n\n  getQueryHasNext(): Observable<any> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      filter(g => g.objects != null),\n      map(g => g.objects!.next),\n    );\n  }\n\n  getQueryCurrentStart(): Observable<any> {\n    return this._store.pipe(\n      this._lastQueryEntry,\n      filter(g => g.options != null),\n      map(g => g.options!.start != null ? g.options!.start : 1),\n    );\n  }\n\n  getCreateSuccess(): Observable<ModelActions.ModelCreateSuccessAction<T>> {\n    return this._actions.pipe(\n      ofType(this._actionTypes.CREATE_SUCCESS),\n    );\n  }\n\n  getUpdateSuccess(): Observable<ModelActions.ModelUpdateSuccessAction<T>> {\n    return this._actions.pipe(\n      ofType(this._actionTypes.UPDATE_SUCCESS),\n    );\n  }\n\n  getPatchSuccess(): Observable<ModelActions.ModelUpdateSuccessAction<T>> {\n    return this._actions.pipe(\n      ofType(this._actionTypes.PATCH_SUCCESS),\n    );\n  }\n\n  getDeleteSuccess(): Observable<ModelActions.ModelDeleteSuccessAction<T>> {\n    return this._actions.pipe(\n      ofType(this._actionTypes.DELETE_SUCCESS),\n    );\n  }\n\n  getDeleteAllSuccess(): Observable<ModelActions.ModelDeleteAllSuccessAction<T>> {\n    return this._actions.pipe(\n      ofType(this._actionTypes.DELETE_ALL_SUCCESS),\n    );\n  }\n\n  get(id: number): Observable<T> {\n    const action = createAction<ModelActions.ModelGetAction>({\n      type: this._actionTypes.GET,\n      payload: {id}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.GET_SUCCESS, this._actionTypes.GET_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.get)),\n      map(gets => gets.find(g => g.uuid === action.uuid)),\n      filter(get => get != null),\n      tap(get => {\n        if (get!.error != null) {\n          throwError(get!.error);\n        }\n      }),\n      filter(get => get!.object != null),\n      map(get => get!.object!),\n    );\n  }\n\n  list(options?: ModelListParams): Observable<ModelListResult<T>> {\n    const action = createAction<ModelActions.ModelListAction>({\n      type: this._actionTypes.LIST,\n      payload: {params: options || {}}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.LIST_SUCCESS, this._actionTypes.LIST_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.list)),\n      map(lists => lists.find(l => l.uuid === action.uuid)),\n      filter(list => list != null),\n      tap(list => {\n        if (list!.error != null) {\n          throwError(list!.error);\n        }\n      }),\n      filter(list => list!.objects != null),\n      map(list => list!.objects!),\n    );\n  }\n\n  create(data: Partial<T>): Observable<T> {\n    const action = createAction<ModelActions.ModelCreateAction<T>>({\n      type: this._actionTypes.CREATE,\n      payload: {item: data},\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.CREATE_SUCCESS, this._actionTypes.CREATE_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.create)),\n      map(creates => creates.find(c => c.uuid === action.uuid)),\n      filter(creates => creates != null),\n      tap(create => {\n        if (create!.error != null) {\n          throwError(create!.error);\n        }\n      }),\n      filter(create => create!.object != null),\n      map(create => create!.object!),\n    );\n  }\n\n  update(data: T): Observable<T> {\n    const action = createAction<ModelActions.ModelUpdateAction<T>>({\n      type: this._actionTypes.UPDATE,\n      payload: {item: data},\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.UPDATE_SUCCESS, this._actionTypes.UPDATE_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.update)),\n      map(updates => updates.find(u => u.uuid === action.uuid)),\n      filter(updates => updates != null),\n      tap(update => {\n        if (update!.error != null) {\n          throwError(update!.error);\n        }\n      }),\n      filter(update => update!.object != null),\n      map(update => update!.object!),\n    );\n  }\n\n  patch(data: T): Observable<T> {\n    const action = createAction<ModelActions.ModelPatchAction<T>>({\n      type: this._actionTypes.PATCH,\n      payload: {item: data}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.PATCH_SUCCESS, this._actionTypes.PATCH_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.patch)),\n      map(patches => patches.find(p => p.uuid === action.uuid)),\n      filter(patches => patches != null),\n      tap(patch => {\n        if (patch!.error != null) {\n          throwError(patch!.error);\n        }\n      }),\n      filter(patch => patch!.object != null),\n      map(patch => patch!.object!),\n    );\n  }\n\n  delete(data: T): Observable<T> {\n    const action = createAction<ModelActions.ModelDeleteAction<T>>({\n      type: this._actionTypes.DELETE,\n      payload: {item: data}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.DELETE_SUCCESS, this._actionTypes.DELETE_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.delete)),\n      map(dels => dels.find(d => d.uuid === action.uuid)),\n      filter(dels => dels != null),\n      tap(del => {\n        if (del!.error != null) {\n          throwError(del!.error);\n        }\n      }),\n      filter(del => del!.object != null),\n      map(del => del!.object!),\n    );\n  }\n\n  deleteAll(data: T[]): Observable<T[]> {\n    const action = createAction<ModelActions.ModelDeleteAllAction<T>>({\n      type: this._actionTypes.DELETE_ALL,\n      payload: {items: data}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.DELETE_ALL_SUCCESS, this._actionTypes.DELETE_ALL_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.deleteAll)),\n      map(deleteAlls => deleteAlls.find(d => d.uuid === action.uuid)),\n      filter(deleteAlls => deleteAlls != null),\n      tap(deleteAll => {\n        if (deleteAll!.error != null) {\n          throwError(deleteAll!.error);\n        }\n      }),\n      filter(deleteAll => deleteAll!.objects != null),\n      map(deleteAll => deleteAll!.objects!),\n    );\n  }\n\n  query(options: ModelQueryParams): Observable<ModelListResult<T>> {\n    const action = createAction<ModelActions.ModelQueryAction>({\n      type: this._actionTypes.QUERY,\n      payload: {params: options || {}}\n    });\n    this._store.dispatch(action);\n    const actResult = this._actions.pipe(\n      ofType(this._actionTypes.QUERY_SUCCESS, this._actionTypes.QUERY_FAILURE),\n      filter(a => a.uuid === action.uuid),\n    );\n    return actResult.pipe(\n      switchMap(() => this._store),\n      select(createSelector(this._modelState, (state) => state.query)),\n      map(queries => queries.find(q => q.uuid === action.uuid)),\n      filter(queries => queries != null),\n      tap(query => {\n        if (query!.error != null) {\n          throwError(query!.error);\n        }\n      }),\n      filter(query => query!.objects != null),\n      map(query => query!.objects!),\n    );\n  }\n}\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","payload","tslib_1.__extends","ModelGetAction","ModelBaseAction","_this","_super","ModelGetSuccessAction","ModelGetFailureAction","ModelListAction","ModelListSuccessAction","ModelListFailureAction","ModelCreateAction","ModelCreateSuccessAction","ModelCreateFailureAction","ModelUpdateAction","ModelUpdateSuccessAction","ModelUpdateFailureAction","ModelPatchAction","ModelPatchSuccessAction","ModelPatchFailureAction","ModelDeleteAction","ModelDeleteSuccessAction","ModelDeleteFailureAction","ModelDeleteAllAction","ModelDeleteAllSuccessAction","ModelDeleteAllFailureAction","ModelQueryAction","ModelQuerySuccessAction","ModelQueryFailureAction","typeName","LIST","type","LIST_FAILURE","LIST_SUCCESS","GET","GET_FAILURE","GET_SUCCESS","CREATE","CREATE_FAILURE","CREATE_SUCCESS","UPDATE","UPDATE_FAILURE","UPDATE_SUCCESS","PATCH","PATCH_FAILURE","PATCH_SUCCESS","DELETE","DELETE_FAILURE","DELETE_SUCCESS","DELETE_ALL","DELETE_ALL_FAILURE","DELETE_ALL_SUCCESS","QUERY","QUERY_FAILURE","QUERY_SUCCESS","generateInitialModelState","get","list","update","patch","delete","deleteAll","query","modelReducer","state","action","actionTypes","tslib_1.__assign","uuid","loading","options","id","object","error","concat","slice","stateQueueLimit","successGetIdx","findIndex","g","item","failureGetIdx","params","objects","successListIdx","result","failureListIdx","successCreateIdx","failureCreateIdx","successUpdateIdx","failureUpdateIdx","successPatchIdx","failurePatchIdx","successDeleteIdx","failureDeleteIdx","ids","items","map","successDeleteAllIdx","failureDeleteAllIdx","successQueryIdx","failureQueryIdx","ModelGenericAction","createAction","v4","_actions","_service","_manager","_actionTypes","modelGet$","createEffect","pipe","ofType","mergeMap","catchError","obsOf","of","modelList$","modelCreate$","modelUpdate$","modelPatch$","modelDelete$","modelDeleteAll$","modelQuery$","ModelManager","BaseModelManager","defineProperty","_endPoint","_baseUrl","_http","_getObjectUrl","_listParamsToQueryParameters","_getListUrl","data","post","put","url","_useTrailingSlash","paramsArray","limit","push","start","sort","props","keys","join","fields","joins","j","model","property","HttpClient","SyncService","decorators","Optional","config","syncService","baseApiUrl","addTrailingSlash","syncModel","tableName","Error","registerSyncModel","MODEL_OPTIONS","InjectionToken","providedIn","factory","ModelService","getGetLoading","_store","_lastGetEntry","getGetOptions","getGetId","getGetObject","getGetError","getListLoading","_lastListEntry","getListOptions","getListObjects","getListError","getListHasNext","filter","next","getListCurrentStart","getCreateLoading","_lastCreateEntry","getCreateObject","getCreateError","getUpdateLoading","_lastUpdateEntry","getUpdateId","getUpdateObject","getUpdateError","getPatchLoading","_lastPatchEntry","getPatchId","getPatchObject","getPatchError","getDeleteLoading","_lastDeleteEntry","getDeleteId","getDeleteObject","getDeleteError","getDeleteAllLoading","_lastDeleteAllEntry","getDeleteAllIds","getDeleteAllObjects","getDeleteAllError","getQueryLoading","_lastQueryEntry","getQueryOptions","getQueryObjects","getQueryError","getQueryHasNext","getQueryCurrentStart","getCreateSuccess","getUpdateSuccess","getPatchSuccess","getDeleteSuccess","getDeleteAllSuccess","dispatch","a","switchMap","select","createSelector","_modelState","gets","find","tap","throwError","lists","l","creates","c","updates","u","patches","dels","del","deleteAlls","queries","q","statePrefixes","packageState","createFeatureSelector"],"mappings":"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"}