{"version":3,"file":"core-sync.umd.js","sources":["../../src/core/sync/sync-module.ts","../../src/core/sync/offline-interceptor.ts","../../src/core/sync/sync-service.ts","../../src/core/sync/sync-utils.ts","../../src/core/sync/sync-options.ts","../../src/core/sync/registered-models.ts","../../node_modules/tslib/tslib.es6.js"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {ModuleWithProviders, NgModule} from '@angular/core';\n\nimport {OfflineInterceptor} from './offline-interceptor';\nimport {SYNC_OPTIONS, SyncOptions} from './sync-options';\nimport {SyncService} from './sync-service';\n\n@NgModule({})\nexport class SyncModule {\n  static forRoot(opts: SyncOptions): ModuleWithProviders {\n    return {\n      ngModule: SyncModule,\n      providers: [\n        SyncService,\n        {provide: HTTP_INTERCEPTORS, useClass: OfflineInterceptor, multi: true},\n        {provide: SYNC_OPTIONS, useValue: opts},\n      ]\n    };\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  HttpEvent, HttpErrorResponse, HttpHandler, HttpInterceptor, HttpRequest, HttpResponse\n} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\n\nimport {Observable, throwError} from 'rxjs';\nimport {catchError, map} from 'rxjs/operators';\n\nimport {RegisteredModel} from './registered-model';\nimport {SYNC_REGISTERED_MODELS} from './registered-models';\nimport {SyncService} from './sync-service';\n\n@Injectable()\nexport class OfflineInterceptor implements HttpInterceptor {\n  constructor(private _syncService: SyncService) { }\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(req).pipe(\n      catchError((e: HttpErrorResponse) => {\n        if (e.status === 0) {\n          const models = this._checkOfflineRequest(req);\n          if (models.length > 0) {\n            return this._doOfflineRequest(req, models[0], e);\n          }\n        }\n        return throwError(e);\n      })\n    );\n  }\n\n  private _doOfflineRequest(\n    req: HttpRequest<any>,\n    model: RegisteredModel,\n    reqError: HttpErrorResponse\n  ): Observable<HttpEvent<any>> {\n    const method = req.method.toLowerCase();\n    const {exactMatch, relativeUrl} = this._analyzeRequestUrl(req, model);\n    if (exactMatch) {\n      if (method === 'get') {\n        const limit = <any>req.params.get('limit');\n        const start = <any>req.params.get('start');\n        const sort = <any>req.params.get('sort');\n        const fields = <any>req.params.get('fields');\n        const joins = <any>req.params.get('joins');\n        return this._syncService.list(model.tableName, {limit, start, sort, fields, joins}).pipe(\n          catchError(_ => throwError(reqError)),\n          map(res => new HttpResponse({\n            status: 200,\n            statusText: 'OK',\n            url: req.url,\n            body: res\n          })),\n        );\n      } else if (method === 'post') {\n        const obj = req.body;\n        return this._syncService.create(model.tableName, obj).pipe(\n          catchError(_ => throwError(reqError)),\n          map(res => new HttpResponse({\n            status: 201,\n            statusText: 'OK',\n            url: req.url,\n            body: res\n          }))\n        );\n      }\n    } else {\n      if (relativeUrl.length === 1) {\n        const lastUrlPart = relativeUrl[0];\n        if (lastUrlPart === 'delete_all') {\n          const ids = req.body.ids;\n          if (ids != null && ids instanceof Array && ids.length > 0) {\n            return this._syncService.deleteAll(model.tableName, ids).pipe(\n              catchError(_ => throwError(reqError)),\n              map(res => new HttpResponse({\n                status: 200,\n                statusText: 'OK',\n                url: req.url,\n                body: res\n              }))\n            );\n          }\n        } else if (lastUrlPart === 'query') {\n          const params = req.body;\n          return this._syncService.query(model.tableName, params).pipe(\n            catchError(_ => throwError(reqError)),\n            map(res => new HttpResponse({\n              status: 200,\n              statusText: 'OK',\n              url: req.url,\n              body: res\n            }))\n          );\n        } else {\n          const id = parseInt(lastUrlPart, 10);\n          if (!isNaN(id) && id > 0) {\n            let op: Observable<any> | null = null;\n            let successStatus: number = 200;\n            const obj = req.body;\n            if (method === 'get') {\n              op = this._syncService.get(model.tableName, {id});\n              successStatus = 201;\n            } else if (method === 'patch' || method === 'put') {\n              op = this._syncService.update(model.tableName, id, obj);\n            } else if (method === 'delete') {\n              op = this._syncService.delete(model.tableName, id);\n            }\n            if (op != null) {\n              return op.pipe(\n                catchError(_ => throwError(reqError)),\n                map(res => new HttpResponse({\n                  status: successStatus,\n                  statusText: 'OK',\n                  url: req.url,\n                  body: res\n                })),\n              );\n            }\n          }\n        }\n      }\n    }\n    return throwError(reqError);\n  }\n\n  private _analyzeRequestUrl(\n    req: HttpRequest<any>,\n    model: RegisteredModel\n  ): {exactMatch: boolean, relativeUrl: string[]} {\n    const exactMatch = new RegExp('^' + model.endpoint + '$').test(req.url);\n    if (exactMatch) { return {exactMatch, relativeUrl: []}; }\n    const baseUrlParts = model.endpoint.split(/\\/+/);\n    const reqUrlParts = req.url.split(/\\/+/);\n    return {exactMatch, relativeUrl: reqUrlParts.slice(baseUrlParts.length)};\n  }\n\n  private _checkOfflineRequest(req: HttpRequest<any>): RegisteredModel[] {\n    return SYNC_REGISTERED_MODELS.filter(m => new RegExp(`^${m.endpoint}`).test(req.url));\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\nimport {Inject, Injectable} from '@angular/core';\n\nimport {\n  BehaviorSubject, from, Observable, of as obsOf, Subscription, throwError, timer, zip\n} from 'rxjs';\nimport {\n  catchError, concatMap, delayWhen, exhaustMap, filter, map, mapTo, switchMap, take, tap, toArray\n} from 'rxjs/operators';\n\nimport * as PouchDB from 'pouchdb';\nimport * as PouchDBDebug from 'pouchdb-debug';\nimport * as PouchDBFind from 'pouchdb-find';\n\nimport {ModelGetParams, ModelListParams, ModelQueryParams, ModelSort} from '@gngt/core/common';\nimport {LocalDoc} from './local-doc';\nimport {LocalSyncEntry} from './local-sync-entry';\nimport {LocalSyncNumber} from './local-sync-number';\nimport {SyncCheckpoint} from './sync-checkpoint';\nimport {SyncEntry} from './sync-entry';\nimport {SYNC_OPTIONS, SyncOptions} from './sync-options';\nimport {SyncStatus} from './sync-status';\nimport {registerSyncModel} from './sync-utils';\nimport {UpwardChange} from './upward-change';\nimport {UpwardChangeResult} from './upward-change-result';\n\ntype DatabaseContent = LocalDoc<any> | LocalSyncEntry | LocalSyncNumber | SyncCheckpoint;\n\nconst pouchDBStatic: PouchDB.Static = (<any>PouchDB).default || PouchDB;\nconst pouchDBFindPlugin: PouchDB.Plugin = (<any>PouchDBFind).default || PouchDBFind;\n\n@Injectable()\nexport class SyncService {\n  private _status: BehaviorSubject<SyncStatus>\n    = new BehaviorSubject<SyncStatus>({status: 'initializing'});\n  readonly status: Observable<SyncStatus> = this._status.asObservable();\n\n  private _timerSub: Subscription = Subscription.EMPTY;\n  private _syncing = false;\n  private _database: PouchDB.Database<DatabaseContent>;\n  private readonly _remoteCheckpointKey = 'gngt_remote_sync_checkpoint';\n  private readonly _localCheckpointKey = 'gngt_local_sync_checkpoint';\n  private readonly _localSyncNumber = 'gngt_local_sync_number';\n  private readonly _localSyncEntryPrefix = 'gngt_local_sync_entry_';\n  private readonly _syncUrl: string;\n  private readonly _changesUrl: string;\n  private readonly _relationalModelIdx: PouchDB.Find.CreateIndexOptions = {\n    index: {name: 'relational_model_idx', fields: ['table_name', 'object_id']}\n  };\n  private readonly _databaseInit: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  private readonly _databaseIsInit: Observable<boolean>;\n\n  constructor(@Inject(SYNC_OPTIONS) private _opts: SyncOptions, private _httpClient: HttpClient) {\n    if (this._opts.syncInterval == null) { this._opts.syncInterval = 300000; }\n    if (this._opts.changesBatchSize == null) { this._opts.changesBatchSize = 50; }\n\n    this._syncUrl = `${this._opts.baseUrl}${this._opts.changesPath || 'changes'}`;\n    this._changesUrl = `${this._opts.baseUrl}${this._opts.docsPath || 'docs'}`;\n    this._initLocalDatabase();\n    this._databaseIsInit = this._databaseInit.pipe(filter(i => i));\n  }\n\n  registerSyncModel(endPoint: string, tableName: string): void {\n    registerSyncModel(endPoint, tableName);\n  }\n\n  start(immediate = true): void {\n    if (this._syncing) { return; }\n    this._syncing = true;\n    this._timerSub = timer(immediate ? 0 : this._opts.syncInterval, this._opts.syncInterval).pipe(\n      delayWhen(_ => this._databaseIsInit),\n    ).subscribe(_ => this._checkSync());\n  }\n\n  stop(): void {\n    if (!this._syncing) { return; }\n    this._timerSub.unsubscribe();\n    this._syncing = false;\n  }\n\n  get(tableName: string, params: ModelGetParams): Observable<any> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => this._relationalModelIdxObs()),\n      exhaustMap(_ => from(db.find(this._modelGetFindRequest(tableName, params)))),\n      take(1),\n      switchMap(res => {\n        if (res.docs.length === 1) {\n          let obj = this._subObject(res.docs[0].object, params.fields);\n          if (params.joins != null) {\n            return zip(...params.joins.map(join =>\n              from(db.find(\n                this._modelGetFindRequest(join.model, {id: obj[join.property], fields: join.fields})\n              )).pipe(\n                take(1),\n                map(related => related.docs.length === 1 ? related.docs[0].object : null),\n                map(related => ({join, related})),\n              )\n            )).pipe(\n              map(joins => {\n                joins.forEach(joinEntry => {\n                  obj[joinEntry.join.property] = joinEntry.related;\n                });\n                return obj;\n              })\n            );\n          }\n          return obsOf(obj);\n        }\n        return throwError('not_found');\n      }),\n      take(1),\n    );\n  }\n\n  list(tableName: string, params: ModelListParams): Observable<any[]> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => this._relationalModelIdxObs({tableName, sort: params.sort})),\n      exhaustMap(idx => from(db.find(this._modelListFindRequest(tableName, params, idx)))),\n      take(1),\n      switchMap(res => {\n        if (params.joins != null) {\n          const joinTables: {[table: string]: number[]} = params.joins.reduce((prev, cur) => {\n            prev[cur.model] = res.docs.map(d => d.object[cur.property]);\n            return prev;\n          }, {} as {[table: string]: number[]});\n          return zip(...params.joins.map(join => {\n              const req = this._modelListFindRequest(join.model, {fields: join.fields});\n              req.selector['object_id'] = {'$in': joinTables[join.model]};\n              return from(db.find(req)).pipe(\n                take(1),\n                map(related => ({join, related: related.docs})),\n              );\n          })).pipe(\n            map(joins => {\n              return res.docs.map(doc => {\n                const obj = doc.object;\n                joins.forEach(joinEntry => {\n                  const prop = joinEntry.join.property;\n                  const rel = joinEntry.related.find(r => r.object_id === obj[prop]);\n                  obj[prop] = rel != null ? rel.object : null;\n                });\n                return this._subObject(obj, params.fields);\n              });\n            }),\n          );\n        }\n        return obsOf(res.docs.map(d => this._subObject(d.object, params.fields)));\n      }),\n      take(1),\n    );\n  }\n\n  create(tableName: string, object: any): Observable<any> {\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => this._nextObjectId(tableName)),\n      take(1),\n      exhaustMap(id => {\n        object = {id, ...object};\n        const localDoc = {table_name: tableName, object_id: id};\n        return from(this._database.post({...localDoc, object})).pipe(\n          exhaustMap(doc => this._createLocalSyncEntry(\n            {doc_id: doc.id, entry_type: 'insert', ...localDoc}\n          ).pipe(\n            map(() => object),\n          )),\n        );\n      }),\n      take(1),\n    );\n  }\n\n  update(tableName: string, id: number, object: any): Observable<any> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => from(db.find(this._modelGetFindRequest(tableName, {id})))),\n      take(1),\n      exhaustMap(res => {\n        if (res.docs.length !== 1) {\n          return throwError('not_found');\n        }\n        const localDoc = {...res.docs[0], object};\n        return from(db.post(localDoc)).pipe(\n          map(r => ({res: r, localDoc})),\n        );\n      }),\n      take(1),\n      exhaustMap(({res, localDoc}) => {\n        const syncEntry: Partial<LocalSyncEntry> = {\n          doc_id: res.id,\n          table_name: tableName,\n          object_id: localDoc.object_id,\n          entry_type: 'update'\n        };\n        return this._createLocalSyncEntry(syncEntry).pipe(\n          map(() => localDoc.object),\n        );\n      }),\n      take(1),\n    );\n  }\n\n  delete(tableName: string, id: number): Observable<any> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => from(db.find(this._modelGetFindRequest(tableName, {id})))),\n      take(1),\n      exhaustMap(res => {\n        if (res.docs.length !== 1) {\n          return throwError('not_found');\n        }\n        const localDoc = res.docs[0];\n        return from(db.remove(localDoc)).pipe(\n          map(r => ({res: r, localDoc})),\n        );\n      }),\n      take(1),\n      exhaustMap(({res, localDoc}) => {\n        const syncEntry: Partial<LocalSyncEntry> = {\n          doc_id: res.id,\n          table_name: tableName,\n          object_id: localDoc.object_id,\n          entry_type: 'delete'\n        };\n        return this._createLocalSyncEntry(syncEntry).pipe(\n          map(() => localDoc.object),\n        );\n      }),\n      take(1),\n    );\n  }\n\n  deleteAll(tableName: string, ids: number[]): Observable<any[]> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => from(db.find(this._modelBulkIdsFindRequest(tableName, ids)))),\n      take(1),\n      concatMap(res => {\n        if (res.docs.length !== 1) {\n          return throwError('not_found');\n        }\n        return from(res.docs);\n      }),\n      concatMap(localDoc => {\n        return from(db.remove(localDoc)).pipe(\n          map(res => ({res, localDoc})),\n        );\n      }),\n      concatMap(({res, localDoc}) => {\n        const syncEntry: Partial<LocalSyncEntry> = {\n          doc_id: res.id,\n          table_name: tableName,\n          object_id: localDoc.object_id,\n          entry_type: 'delete'\n        };\n        return this._createLocalSyncEntry(syncEntry).pipe(\n          map(() => localDoc.object),\n        );\n      }),\n      take(ids.length),\n      toArray(),\n    );\n  }\n\n  query(tableName: string, params: ModelQueryParams): Observable<any[]> {\n    const db = this._getLocalDocsDb();\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => this._relationalModelIdxObs({tableName, sort: params.sort})),\n      take(1),\n      exhaustMap(idx => from(db.find(this._modelQueryFindRequest(tableName, params, idx)))),\n      take(1),\n      switchMap(res => {\n        if (params.joins != null) {\n          const joinTables: {[table: string]: number[]} = params.joins.reduce((prev, cur) => {\n            prev[cur.model] = res.docs.map(d => d.object[cur.property]);\n            return prev;\n          }, {} as {[table: string]: number[]});\n          return zip(...params.joins.map(join => {\n              const req = this._modelListFindRequest(join.model, {fields: join.fields});\n              req.selector['object_id'] = {'$in': joinTables[join.model]};\n              return from(db.find(req)).pipe(\n                take(1),\n                map(related => ({join, related: related.docs})),\n              );\n          })).pipe(\n            map(joins => {\n              return res.docs.map(doc => {\n                const obj = doc.object;\n                joins.forEach(joinEntry => {\n                  const prop = joinEntry.join.property;\n                  const rel = joinEntry.related.find(r => r.object_id === obj[prop]);\n                  obj[prop] = rel != null ? rel.object : null;\n                });\n                return this._subObject(obj, params.fields);\n              });\n            }),\n          );\n        }\n        return obsOf(res.docs.map(d => this._subObject(d.object, params.fields)));\n      }),\n      take(1),\n    );\n  }\n\n  private _getLocalDocsDb(): PouchDB.Database<LocalDoc<any>> {\n    return this._database as PouchDB.Database<LocalDoc<any>>;\n  }\n\n  private _getLocalSyncDb(): PouchDB.Database<LocalSyncEntry> {\n    return this._database as PouchDB.Database<LocalSyncEntry>;\n  }\n\n  private _getLocalSyncNumberDb(): PouchDB.Database<LocalSyncNumber> {\n    return this._database as PouchDB.Database<LocalSyncNumber>;\n  }\n\n  private _getSyncCheckpointDb(): PouchDB.Database<SyncCheckpoint> {\n    return this._database as PouchDB.Database<SyncCheckpoint>;\n  }\n\n  private _createLocalSyncEntry(syncEntry: Partial<LocalSyncEntry>): Observable<number> {\n    return this._getNextLocalSyncNumber().pipe(\n      exhaustMap(syncNumber => {\n        syncEntry._id = `_local/${this._localSyncEntryPrefix}${syncNumber}`;\n        syncEntry.sequence = syncNumber;\n        return from(this._database.put<LocalSyncEntry>(syncEntry as LocalSyncEntry)).pipe(\n          take(1),\n          exhaustMap(_ => this._setLocalSyncNumber(syncNumber)),\n          take(1),\n        );\n      }),\n    );\n  }\n\n  private _setLocalSyncNumber(syncNumber: number): Observable<number> {\n    const db = this._getLocalSyncNumberDb();\n    const id = `_local/${this._localSyncNumber}`;\n    return from(db.get(id)).pipe(\n      take(1),\n      catchError(_ => obsOf({_id: id, number: 0} as LocalSyncNumber)),\n      exhaustMap(doc => from(db.post({...doc, number: syncNumber})).pipe(take(1))),\n      map(_ => syncNumber),\n    );\n  }\n\n  private _getNextLocalSyncNumber(): Observable<number> {\n    const db = this._getLocalSyncNumberDb();\n    return from(db.get(`_local/${this._localSyncNumber}`)\n    ).pipe(\n      take(1),\n      map(doc => doc.number + 1),\n      catchError(_ => obsOf(1)),\n    );\n  }\n\n  private _nextObjectId(tableName: string): Observable<number> {\n    const sort = {object_id: 'desc'} as ModelSort;\n    const db = this._getLocalDocsDb();\n    return this._relationalModelIdxObs({tableName, sort}).pipe(\n      exhaustMap(idx => from(db.find(\n        this._modelListFindRequest(tableName, {sort}, idx)\n      )).pipe(take(1))),\n      map(res => res.docs.length > 0 ? res.docs[0].object_id + 1 : 1),\n    );\n  }\n\n  private _relationalModelIdxObs(\n    idxDef?: {tableName: string, sort?: ModelSort}\n  ): Observable<PouchDB.Find.CreateIndexResponse<LocalDoc<any>>> {\n    if (idxDef != null && idxDef.sort != null) {\n      let {dir, fields} = this._normalizeSortParam(idxDef.sort);\n      fields = [{table_name: dir}, ...fields];\n      if (fields.length > 0) {\n        return from(this._database.createIndex({\n          index: {\n            name: this._generateIndexName(idxDef.tableName, fields),\n            fields: fields as any\n          }\n        }));\n      }\n    }\n    return from(this._database.createIndex(this._relationalModelIdx)).pipe(take(1));\n  }\n\n  private _generateIndexName(tableName: string, fields: ModelSort[]): string {\n    return `idx___${tableName}___${fields.map(f => {\n      const key = Object.keys(f)[0];\n      return `${key}__${f[key]}`;\n    }).join('___')}`;\n  }\n\n  private _subObject(obj: any, fields?: string[]): any {\n    if (obj == null || fields == null) { return obj; }\n    obj = obj || {};\n    const subObj: any = {};\n    (fields || []).forEach(f => subObj[f] = obj[f]);\n    return subObj;\n  }\n\n  private _checkSync(): void {\n    this._checkUpwardSync();\n  }\n\n  private _checkUpwardSync(): void {\n    zip(this._getLastLocalCheckpoint(), this._getNextLocalSyncNumber()).pipe(\n      exhaustMap(([checkpoint, syncNumber]) => {\n        const localSyncDb = this._getLocalSyncDb();\n        const gets: Observable<LocalSyncEntry>[] = [];\n        const firstId = checkpoint + 1;\n        const lastId = Math.min(firstId + this._opts.changesBatchSize! - 1, syncNumber - 1);\n        if (lastId <= checkpoint) {\n          return obsOf(false);\n        }\n\n        const hasNext = lastId < syncNumber - 1;\n\n        this.stop();\n\n        for (let i = firstId ; i <= lastId ; i++) {\n          gets.push(from(localSyncDb.get(`_local/${this._localSyncEntryPrefix}${i}`)));\n        }\n        return zip(...gets).pipe(\n          exhaustMap(entries => {\n            const localDocsDb = this._getLocalDocsDb();\n            const opts = {keys: entries.map(e => e.doc_id), include_docs: true};\n            return from(localDocsDb.allDocs(opts)).pipe(\n              map(localDocs => {\n                const docs = entries.map(\n                  (syncEntry, i) => ({syncEntry, localDoc: localDocs.rows[i].doc!})\n                );\n                return {hasNext, docs};\n              }),\n              take(1),\n            );\n          }),\n          exhaustMap(res => this._processUpwardChanges(res)),\n          take(1),\n        );\n      }),\n    ).subscribe(\n      hasNext => {\n        if (hasNext) {\n          this._checkUpwardSync();\n        } else {\n          this._checkDownwardSync();\n        }\n      },\n      err => {\n        this._emitSyncError(err);\n        this.start(false);\n      }\n    );\n  }\n\n  private _checkDownwardSync(): void {\n    this._getLastRemoteCheckpoint().pipe(\n      exhaustMap(since => {\n        const params = `since=${since}&batchSize=${this._opts.changesBatchSize}`;\n        return this._httpClient.get<SyncEntry[]>(`${this._syncUrl}?${params}`);\n      })\n    ).subscribe(changes => {\n      this.stop();\n      this._processDownwardChanges(changes);\n    });\n  }\n\n  private _getLastLocalCheckpoint(): Observable<number> {\n    return this._getLastCheckpoint(this._localCheckpointKey);\n  }\n\n  private _getLastRemoteCheckpoint(): Observable<number> {\n    return this._getLastCheckpoint(this._remoteCheckpointKey);\n  }\n\n  private _getLastCheckpoint(checkpointKey: string): Observable<number> {\n    const db = this._getSyncCheckpointDb();\n    return from(db.get(`_local/${checkpointKey}`)).pipe(\n      map(d => d.checkpoint),\n      catchError(_ => obsOf(0)),\n    );\n  }\n\n  private _setLastLocalCheckpoint(checkpoint: number): Observable<number> {\n    return this._setLastCheckpoint(this._localCheckpointKey, checkpoint);\n  }\n\n  private _setLastRemoteCheckpoint(checkpoint: number): Observable<number> {\n    return this._setLastCheckpoint(this._remoteCheckpointKey, checkpoint);\n  }\n\n  private _setLastCheckpoint(checkpointKey: string, checkpoint: number): Observable<number> {\n    const db = this._getSyncCheckpointDb();\n    const docKey = `_local/${checkpointKey}`;\n    const doc = {_id: docKey, checkpoint} as SyncCheckpoint;\n    return from(db.get(docKey)).pipe(\n      catchError(_ => obsOf({} as SyncCheckpoint)),\n      take(1),\n      exhaustMap(d => from(db.put({...d, ...doc})).pipe(take(1))),\n      catchError(_ => throwError('checkpoint_set_failed')),\n      mapTo(checkpoint),\n    );\n  }\n\n  private _processUpwardChanges(p: {hasNext: boolean, docs: UpwardChange[]}): Observable<boolean> {\n    const payload = p.docs.map(doc => {\n      return {\n        sequence: doc.syncEntry.sequence,\n        table_name: doc.syncEntry.table_name,\n        object_id: doc.syncEntry.object_id,\n        entry_type: doc.syncEntry.entry_type,\n        object: doc.localDoc.object\n      };\n    });\n    return this._httpClient.post<UpwardChangeResult[]>(this._syncUrl, payload).pipe(\n      map(res => res[res.length - 1].sequence),\n      catchError((err: HttpErrorResponse) => {\n        if (err.status !== 409) {\n          return throwError(err);\n        }\n        p.hasNext = true;\n        return this._resolveUpwardConflict(p.docs, err.error);\n      }),\n      exhaustMap(sequence => sequence >= 0 ? this._setLastLocalCheckpoint(sequence) : obsOf(null)),\n      map(_ => p.hasNext),\n    );\n  }\n\n  private _resolveUpwardConflict(\n    docs: UpwardChange[], result: UpwardChangeResult[]\n  ): Observable<number> {\n    const conflictIdx = result.findIndex(r => r.ok === false && r.error === 'conflict')!;\n    const conflict = result[conflictIdx];\n    const conflictDoc = docs.find(d => d.syncEntry.sequence === conflict.sequence)!;\n    const checkpoint = conflictIdx > 0 ? result[conflictIdx - 1].sequence : -1;\n    const localDocsDb = this._getLocalDocsDb();\n    const findReq = this._modelListFindRequest(conflictDoc.syncEntry.table_name, {});\n    findReq.selector['object_id'] = {$gte: conflictDoc.syncEntry.object_id};\n    return this._databaseIsInit.pipe(\n      exhaustMap(_ => from(localDocsDb.find(findReq)).pipe(take(1))),\n      exhaustMap(res => {\n        const updDocs = res.docs.map((doc, idx) => {\n          doc.object_id = doc.object.id = conflict.extra.next_id + idx;\n          return doc;\n        });\n        return from(localDocsDb.bulkDocs(updDocs)).pipe(take(1));\n      }),\n      map(_ => checkpoint),\n    );\n  }\n\n  private _processDownwardChanges(syncEntries: SyncEntry[]): void {\n    if (syncEntries == null || syncEntries.length === 0) {\n      this._emitSyncPaused();\n      this.start(false);\n      return;\n    }\n    const changes = syncEntries.map(s => s.id);\n    const url = this._changesUrl;\n    this._httpClient.post<SyncEntry[]>(url, {changes}).pipe(\n      catchError(_ => {\n        this._emitSyncError('network_error');\n        return obsOf([] as SyncEntry[]);\n      }),\n      switchMap(docs => from(\n        changes.map(change => ({change, doc: (docs || []).find(d => d.id === change)}))\n      )),\n      tap(_ => this._emitSyncSyncing()),\n      concatMap(({change, doc}) => doc == null\n        ? throwError(`missing_change_${change}`)\n        : this._processDownwardChange(doc)\n      ),\n      concatMap(change => this._setLastRemoteCheckpoint(change.id))\n    ).subscribe(\n      _ => {},\n      error => {\n        this._emitSyncError(error);\n        this.start(false);\n      },\n      () => {\n        const hasMore = changes.length > 0;\n        if (!hasMore) {\n          this._emitSyncPaused();\n        }\n        this.start(hasMore);\n      }\n    );\n  }\n\n  private _emitSyncError(error: string): void {\n    this._status.next({status: 'error', error});\n  }\n\n  private _emitSyncPaused(): void {\n    this._status.next({status: 'paused'});\n  }\n\n  private _emitSyncSyncing(): void {\n    this._status.next({status: 'syncing'});\n  }\n\n  private _processDownwardChange(change: SyncEntry): Observable<SyncEntry> {\n    if (\n      change.entry_type !== 'insert'\n      && change.entry_type !== 'update'\n      && change.entry_type !== 'delete'\n    ) {\n      return throwError('invalid_entry_type');\n    }\n\n    const baseReq = this._relationalModelIdxObs().pipe(\n      exhaustMap(_ => from(this._database.find(this._syncEntryFindRequest(change))).pipe(take(1))),\n    );\n\n    if (change.entry_type === 'insert') {\n      return baseReq.pipe(\n        exhaustMap(localDocs => {\n          if (localDocs.docs.length !== 0) {\n            return throwError('existing_doc');\n          }\n          return from(this._database.post(this._syncEntryToLocalDoc(change))).pipe(take(1));\n        }),\n        mapTo(change),\n      );\n    }\n\n    return baseReq.pipe(\n      exhaustMap(localDocs => {\n        if (localDocs.docs.length !== 1) {\n          return throwError('unexisting_doc');\n        }\n\n        const localDoc = localDocs.docs[0];\n        const op = from(change.entry_type === 'update'\n          ? this._database.put({...localDoc, object: change.object})\n          : this._database.remove(localDoc));\n        return op.pipe(\n          take(1),\n          mapTo(change),\n        );\n      })\n    );\n  }\n\n  private _modelGetFindRequest(\n    tableName: string, params: ModelGetParams\n  ): PouchDB.Find.FindRequest<LocalDoc<any>> {\n    return {\n      selector: {table_name: tableName, object_id: params.id}\n    };\n  }\n\n  private _modelBulkIdsFindRequest(\n    tableName: string, ids: number[],\n  ): PouchDB.Find.FindRequest<LocalDoc<any>> {\n    return {\n      selector: {\n        table_name: tableName,\n        object_id: {$in: ids}\n      }\n    };\n  }\n\n  private _modelQueryFindRequest(\n    tableName: string, params: ModelQueryParams,\n    index?: PouchDB.Find.CreateIndexResponse<LocalDoc<any>>\n  ): PouchDB.Find.FindRequest<LocalDoc<any>> {\n    const req: PouchDB.Find.FindRequest<LocalDoc<any>> = this._modelListFindRequest(\n      tableName, params, index\n    );\n    return {...req, selector: {...req.selector, ...this._normalizeSelector(params.selector)}};\n  }\n\n  private _modelListFindRequest(\n    tableName: string, params: ModelListParams,\n    index?: PouchDB.Find.CreateIndexResponse<LocalDoc<any>>\n  ): PouchDB.Find.FindRequest<LocalDoc<any>> {\n    const req: PouchDB.Find.FindRequest<LocalDoc<any>> = {\n      selector: {table_name: tableName}\n    };\n    if (params.sort != null) {\n      const {dir, fields} = this._normalizeSortParam(params.sort);\n      req.sort = [{table_name: dir}, ...fields];\n    } else {\n      req.sort = ['table_name', 'object_id'];\n    }\n    if (params.start != null) {\n      req.skip = params.start;\n    }\n    if (params.limit != null) {\n      req.limit = params.limit;\n    }\n    if (index != null) {\n      const idxParts = ((index as any).id || '').split('/');\n      if (idxParts.length === 2) {\n        req.use_index = idxParts[1];\n      }\n    }\n    return req;\n  }\n\n  private _normalizeSelector(selector: PouchDB.Find.Selector): PouchDB.Find.Selector {\n    const normSelector: PouchDB.Find.Selector = {};\n    Object.keys(selector).forEach(key => {\n      normSelector[`object.${key}`] = selector[key];\n    });\n    return normSelector;\n  }\n\n  private _normalizeSortParam(\n    sortParam: {[prop: string]: 'asc' | 'desc'}\n  ): {dir: 'asc' | 'desc', fields: ModelSort[]} {\n    let dir: 'asc' | 'desc' = 'asc';\n    const fields = Object.keys(sortParam).map((key, i) => {\n      const sort: any = {};\n      if (i == 0) { dir = sortParam[key]; }\n      sort[key !== 'object_id' ? `object.${key}` : key] = dir;\n      return sort;\n    });\n    return {dir, fields};\n  }\n\n  private _syncEntryFindRequest(entry: SyncEntry): PouchDB.Find.FindRequest<LocalDoc<any>> {\n    return {selector : this._syncEntryFindSelector(entry)};\n  }\n\n  private _syncEntryFindSelector(entry: SyncEntry): PouchDB.Find.Selector {\n    return {\n      table_name: entry.table_name,\n      object_id: entry.object_id,\n    };\n  }\n\n  private _initLocalDatabase(): void {\n    pouchDBStatic.plugin(pouchDBFindPlugin);\n    pouchDBStatic.plugin(PouchDBDebug);\n    this._database = new pouchDBStatic(this._opts.localDatabaseName, {revs_limit: 1});\n\n    this._database.createIndex(this._relationalModelIdx)\n      .then(_ => {\n        this._emitSyncPaused();\n        this._databaseInit.next(true);\n      })\n      .catch(_ => this._emitSyncError('indexing_failed'));\n  }\n\n  private _syncEntryToLocalDoc(entry: SyncEntry): LocalDoc<any> {\n    return {\n      object_id: entry.object_id,\n      table_name: entry.table_name,\n      object: entry.object\n    };\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {SYNC_REGISTERED_MODELS} from './registered-models';\n\nexport function registerSyncModel(endpoint: string, tableName: string): void {\n  if (SYNC_REGISTERED_MODELS.find(r => r.tableName === tableName) == null) {\n    const registeredModel = {tableName, endpoint};\n    SYNC_REGISTERED_MODELS.push(registeredModel);\n    console.log(`Registered sync model ${tableName} with endpoint ${endpoint}`);\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {InjectionToken} from '@angular/core';\n\nexport interface SyncOptions {\n  baseUrl: string;\n  changesPath?: string;\n  docsPath?: string;\n  localDatabaseName: string;\n  syncInterval?: number;\n  changesBatchSize?: number;\n}\n\nexport const SYNC_OPTIONS = new InjectionToken<SyncOptions>('SYNC_OPTIONS');\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {RegisteredModel} from './registered-model';\n\nexport const SYNC_REGISTERED_MODELS: RegisteredModel[] = [];\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n"],"names":["NgModule","HTTP_INTERCEPTORS","Injectable","throwError","HttpResponse","map","catchError","HttpClient","Inject","tslib_1.__assign","take","mapTo","from","exhaustMap","concatMap","tap","switchMap","obsOf","zip","toArray","timer","delayWhen","filter","BehaviorSubject","Subscription","((/** @type {?} */ (PouchDBFind))).default","PouchDBFind","((/** @type {?} */ (PouchDB))).default","PouchDB","InjectionToken"],"mappings":"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"}