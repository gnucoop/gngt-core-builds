/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Gnucoop Angular Toolkit (gngt).
 *
 * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.
 *
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@gngt/core/reducers"),require("rxjs"),require("rxjs/operators"),require("@ngrx/effects"),require("uuid"),require("@angular/core"),require("@ngrx/store")):"function"==typeof define&&define.amd?define("@gngt/core/model",["exports","@gngt/core/reducers","rxjs","rxjs/operators","@ngrx/effects","uuid","@angular/core","@ngrx/store"],e):e(((t=t||self).dewco=t.dewco||{},t.dewco.core=t.dewco.core||{},t.dewco.core.model={}),t.gngt.core.reducers,t.rxjs,t.rxjs.operators,t.ngrx.effects,t.uuid,t.ng.core,t.ngrx.store)}(this,function(t,e,o,u,a,r,n,c){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function l(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var m=function(){return(m=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var s=function(t){this.payload=t},p=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),d=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),f=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),y=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),h=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),_=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),E=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),g=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),S=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),T=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),A=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),L=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),U=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),C=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),j=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),b=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),v=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),D=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),I=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),P=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),R=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),M=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),x=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),O=function(r){function t(t){var e=r.call(this,t)||this;return e.payload=t,e}return l(t,r),t}(s),F=Object.freeze({ModelActionTypes:function(){},generateModelActionTypes:function(t){return{LIST:e.type("["+t+"] List"),LIST_FAILURE:e.type("["+t+"] List failure"),LIST_SUCCESS:e.type("["+t+"] List success"),GET:e.type("["+t+"] Get"),GET_FAILURE:e.type("["+t+"] Get failure"),GET_SUCCESS:e.type("["+t+"] Get success"),CREATE:e.type("["+t+"] Create"),CREATE_FAILURE:e.type("["+t+"] Create failure"),CREATE_SUCCESS:e.type("["+t+"] Create success"),UPDATE:e.type("["+t+"] Update"),UPDATE_FAILURE:e.type("["+t+"] Update failure"),UPDATE_SUCCESS:e.type("["+t+"] Update success"),PATCH:e.type("["+t+"] Patch"),PATCH_FAILURE:e.type("["+t+"] Patch failure"),PATCH_SUCCESS:e.type("["+t+"] Patch success"),DELETE:e.type("["+t+"] Delete"),DELETE_FAILURE:e.type("["+t+"] Delete failure"),DELETE_SUCCESS:e.type("["+t+"] Delete success"),DELETE_ALL:e.type("["+t+"] Delete all"),DELETE_ALL_FAILURE:e.type("["+t+"] Delete all failure"),DELETE_ALL_SUCCESS:e.type("["+t+"] Delete all success"),QUERY:e.type("["+t+"] Query"),QUERY_FAILURE:e.type("["+t+"] Query failure"),QUERY_SUCCESS:e.type("["+t+"] Query success")}},ModelBaseAction:s,ModelGetAction:p,ModelGetSuccessAction:d,ModelGetFailureAction:f,ModelListAction:y,ModelListSuccessAction:h,ModelListFailureAction:_,ModelCreateAction:E,ModelCreateSuccessAction:g,ModelCreateFailureAction:S,ModelUpdateAction:T,ModelUpdateSuccessAction:A,ModelUpdateFailureAction:L,ModelPatchAction:U,ModelPatchSuccessAction:C,ModelPatchFailureAction:j,ModelDeleteAction:b,ModelDeleteSuccessAction:v,ModelDeleteFailureAction:D,ModelDeleteAllAction:I,ModelDeleteAllSuccessAction:P,ModelDeleteAllFailureAction:R,ModelQueryAction:M,ModelQuerySuccessAction:x,ModelQueryFailureAction:O});function Q(){return{get:[],list:[],create:[],update:[],patch:[],delete:[],deleteAll:[],query:[]}}function q(t,e,r){switch(e.type){case r.GET:return m({},t,{get:[{uuid:e.uuid,loading:!0,options:{id:null},id:e.payload.id,object:null,error:null}].concat(t.get.slice(0,19))});case r.GET_SUCCESS:var n=t.get.findIndex(function(t){return t.uuid===e.uuid});return 0<=n?m({},t,{get:t.get.slice(0,n).concat([m({},t.get[n],{loading:!1,object:e.payload.item,error:null})],t.get.slice(n+1))}):t;case r.GET_FAILURE:var i=t.get.findIndex(function(t){return t.uuid===e.uuid});return 0<=i?m({},t,{get:t.get.slice(0,i).concat([m({},t.get[i],{loading:!1,object:null,error:e.payload.error})],t.get.slice(i+1))}):t;case r.LIST:return m({},t,{list:[{uuid:e.uuid,loading:!0,options:e.payload.params,objects:null,error:null}].concat(t.list.slice(0,19))});case r.LIST_SUCCESS:var o=t.list.findIndex(function(t){return t.uuid===e.uuid});return 0<=o?m({},t,{list:t.list.slice(0,o).concat([m({},t.list[o],{loading:!1,objects:e.payload.result,error:null})],t.list.slice(o+1))}):t;case r.LIST_FAILURE:var u=t.list.findIndex(function(t){return t.uuid===e.uuid});return 0<=u?m({},t,{list:t.list.slice(0,u).concat([m({},t.list[u],{loading:!1,objects:null,error:e.payload.error})],t.list.slice(u+1))}):t;case r.CREATE:return m({},t,{create:[{uuid:e.uuid,loading:!0,object:e.payload.item,error:null}].concat(t.create.slice(0,19))});case r.CREATE_SUCCESS:var a=t.create.findIndex(function(t){return t.uuid===e.uuid});return 0<=a?m({},t,{create:t.create.slice(0,a).concat([m({},t.create[a],{loading:!1,object:e.payload.item,error:null})],t.create.slice(a+1))}):t;case r.CREATE_FAILURE:var c=t.create.findIndex(function(t){return t.uuid===e.uuid});return 0<=c?m({},t,{create:t.create.slice(0,c).concat([m({},t.create[c],{loading:!1,object:null,error:e.payload.error})],t.create.slice(c+1))}):t;case r.UPDATE:return m({},t,{update:[{uuid:e.uuid,loading:!0,id:e.payload.item.id,object:e.payload.item,error:null}].concat(t.update.slice(0,19))});case r.UPDATE_SUCCESS:var l=t.update.findIndex(function(t){return t.uuid===e.uuid});return 0<=l?m({},t,{update:t.update.slice(0,l).concat([m({},t.update[l],{loading:!1,object:e.payload.item,error:null})],t.update.slice(l+1))}):t;case r.UPDATE_FAILURE:var s=t.update.findIndex(function(t){return t.uuid===e.uuid});return 0<=s?m({},t,{update:t.update.slice(0,s).concat([m({},t.update[s],{loading:!1,object:null,error:e.payload.error})],t.update.slice(s+1))}):t;case r.PATCH:return m({},t,{patch:[{uuid:e.uuid,loading:!0,id:e.payload.item.id,object:e.payload.item,error:null}].concat(t.patch.slice(0,19))});case r.PATCH_SUCCESS:var p=t.patch.findIndex(function(t){return t.uuid===e.uuid});return 0<=p?m({},t,{patch:t.patch.slice(0,p).concat([m({},t.patch[p],{loading:!1,object:e.payload.item,error:null})],t.patch.slice(p+1))}):t;case r.PATCH_FAILURE:var d=t.patch.findIndex(function(t){return t.uuid===e.uuid});return 0<=d?m({},t,{patch:t.patch.slice(0,d).concat([m({},t.patch[d],{loading:!1,object:null,error:e.payload.error})],t.patch.slice(d+1))}):t;case r.DELETE:return m({},t,{delete:[{uuid:e.uuid,loading:!0,id:e.payload.item.id,object:null,error:null}].concat(t.delete.slice(0,19))});case r.DELETE_SUCCESS:var f=t.delete.findIndex(function(t){return t.uuid===e.uuid});return 0<=f?m({},t,{delete:t.delete.slice(0,f).concat([m({},t.delete[f],{loading:!1,object:e.payload.item,error:null})],t.delete.slice(f+1))}):t;case r.DELETE_FAILURE:var y=t.delete.findIndex(function(t){return t.uuid===e.uuid});return 0<=y?m({},t,{delete:t.delete.slice(0,y).concat([m({},t.delete[y],{loading:!1,object:null,error:e.payload.error})],t.delete.slice(y+1))}):t;case r.DELETE_ALL:return m({},t,{deleteAll:[{uuid:e.uuid,loading:!0,ids:e.payload.items.map(function(t){return t.id}),objects:null,error:null}].concat(t.deleteAll.slice(0,19))});case r.DELETE_ALL_SUCCESS:var h=t.deleteAll.findIndex(function(t){return t.uuid===e.uuid});return 0<=h?m({},t,{deleteAll:t.deleteAll.slice(0,h).concat([m({},t.deleteAll[h],{loading:!1,objects:e.payload.items,error:null})],t.deleteAll.slice(h+1))}):t;case r.DELETE_ALL_FAILURE:var _=t.deleteAll.findIndex(function(t){return t.uuid===e.uuid});return 0<=_?m({},t,{deleteAll:t.deleteAll.slice(0,_).concat([m({},t.deleteAll[_],{loading:!1,objects:null,error:e.payload.error})],t.deleteAll.slice(_+1))}):t;case r.QUERY:return m({},t,{query:[{uuid:e.uuid,loading:!0,options:e.payload.params,objects:null,error:null}].concat(t.query.slice(0,19))});case r.QUERY_SUCCESS:var E=t.query.findIndex(function(t){return t.uuid===e.uuid});return 0<=E?m({},t,{query:t.query.slice(0,E).concat([m({},t.query[E],{loading:!1,options:m({},t.query[E].options),objects:e.payload.result,error:null})],t.query.slice(E+1))}):t;case r.QUERY_FAILURE:var g=t.query.findIndex(function(t){return t.uuid===e.uuid});return 0<=g?m({},t,{query:t.query.slice(0,g).concat([m({},t.query[g],{loading:!1,options:m({},t.query[g].options),objects:null,error:e.payload.error})],t.query.slice(g+1))}):t;default:return t}}var G=Object.freeze({ModelPackageState:function(){},generateInitialModelState:Q,modelReducer:q}),w=function(t){this.payload=t};function H(t){var e=new w(t.payload);return e.type=t.type,e.uuid=t.uuid||r.v4(),e}var Y=function(t,e,r,n){var i=this;this._actions=t,this._service=e,this._manager=r,this._actionTypes=n,this.modelGet$=this._actions.pipe(a.ofType(this._actionTypes.GET),u.mergeMap(function(e){return i._manager.get(e.payload.id).pipe(u.map(function(t){return H({type:i._actionTypes.GET_SUCCESS,payload:{item:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.GET_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelList$=this._actions.pipe(a.ofType(this._actionTypes.LIST),u.mergeMap(function(e){return i._manager.list(e.payload.params).pipe(u.map(function(t){return H({type:i._actionTypes.LIST_SUCCESS,payload:{result:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.LIST_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelCreate$=this._actions.pipe(a.ofType(this._actionTypes.CREATE),u.mergeMap(function(e){return i._manager.create(e.payload.item).pipe(u.map(function(t){return H({type:i._actionTypes.CREATE_SUCCESS,payload:{item:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.CREATE_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelUpdate$=this._actions.pipe(a.ofType(this._actionTypes.UPDATE),u.mergeMap(function(e){return i._manager.update(e.payload.item.id,e.payload.item).pipe(u.map(function(t){return H({type:i._actionTypes.UPDATE_SUCCESS,payload:{item:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.CREATE_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelPatch$=this._actions.pipe(a.ofType(this._actionTypes.PATCH),u.mergeMap(function(e){return i._manager.patch(e.payload.item.id,e.payload.item).pipe(u.map(function(t){return H({type:i._actionTypes.CREATE_SUCCESS,payload:{item:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.CREATE_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelDelete$=this._actions.pipe(a.ofType(this._actionTypes.DELETE),u.mergeMap(function(e){return i._manager.delete(e.payload.item.id).pipe(u.map(function(){return H({type:i._actionTypes.DELETE_SUCCESS,payload:{item:e.payload.item},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.DELETE_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelDeleteAll$=this._actions.pipe(a.ofType(this._actionTypes.DELETE_ALL),u.mergeMap(function(e){return i._manager.deleteAll(e.payload.items.map(function(t){return t.id})).pipe(u.map(function(){return H({type:i._actionTypes.DELETE_ALL_SUCCESS,payload:{items:e.payload.items},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.DELETE_ALL_FAILURE,payload:{error:t},uuid:e.uuid}))}))})),this.modelQuery$=this._actions.pipe(a.ofType(this._actionTypes.QUERY),u.mergeMap(function(e){return i._manager.query(e.payload.params).pipe(u.map(function(t){return H({type:i._actionTypes.QUERY_SUCCESS,payload:{result:t},uuid:e.uuid})}),u.catchError(function(t){return o.of(H({type:i._actionTypes.QUERY_FAILURE,payload:{error:t},uuid:e.uuid}))}))}))},$=function(){function t(t,e,r){this._config=t,this._endPoint=e,this._http=r,this._baseUrl=""+this._config.baseApiUrl+this._endPoint}return Object.defineProperty(t.prototype,"endPoint",{get:function(){return this._endPoint},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._http.get(this._getObjectUrl(t))},t.prototype.list=function(t){var e=this._listParamsToQueryParameters(t);return this._http.get(""+this._getListUrl()+e)},t.prototype.create=function(t){return this._http.post(this._getListUrl(),t)},t.prototype.update=function(t,e){return this._http.put(this._getObjectUrl(t),e)},t.prototype.patch=function(t,e){return this._http.patch(this._getObjectUrl(t),e)},t.prototype.delete=function(t){return this._http.delete(this._getObjectUrl(t))},t.prototype.deleteAll=function(t){var e=this._baseUrl+"/delete_all";return this._config.addTrailingSlash&&(e+="/"),this._http.post(e,{ids:t})},t.prototype.query=function(t){var e=this._baseUrl+"/query";return this._config.addTrailingSlash&&(e+="/"),this._http.post(e,t)},t.prototype._getObjectUrl=function(t){var e=this._baseUrl+"/"+t;return this._config.addTrailingSlash&&(e+="/"),e},t.prototype._getListUrl=function(){var t=this._baseUrl;return this._config.addTrailingSlash&&(t+="/"),t},t.prototype._listParamsToQueryParameters=function(e){var t="",r=[];if(e){if(e.limit&&r.push("limit="+e.limit),e.start&&r.push("start="+e.start),e.sort){var n=Object.keys(e.sort);r.push("sort="+n.map(function(t){return t+":"+e.sort[t]}).join(","))}e.fields&&r.push("fields="+e.fields.join(",")),e.joins&&r.push("joins="+e.joins.map(function(t){var e=t.model+"."+t.property;return t.fields?e+"."+t.fields.join(";"):e}).join(",")),0<r.length&&(t="?"+r.join("&"))}return t},t}(),N=new n.InjectionToken("MODEL_OPTIONS",{providedIn:"root",factory:function(){return{baseApiUrl:"/"}}}),k=function(){function t(t,e,r,n){this._store=t,this._actions=e,this._actionTypes=r;var i=c.createFeatureSelector(n[0]);this._modelState=c.createSelector(i,function(t){return t[n[1]]}),this._lastGetEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.get})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastListEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.list})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastCreateEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.create})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastPatchEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.patch})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastUpdateEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.update})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastDeleteEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.delete})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastDeleteAllEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.deleteAll})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]})),this._lastQueryEntry=o.pipe(c.select(c.createSelector(this._modelState,function(t){return t.query})),u.filter(function(t){return 0<t.length}),u.map(function(t){return t[0]}))}return t.prototype.getGetLoading=function(){return this._store.pipe(this._lastGetEntry,u.map(function(t){return t.loading}))},t.prototype.getGetOptions=function(){return this._store.pipe(this._lastGetEntry,u.map(function(t){return t.options}))},t.prototype.getGetId=function(){return this._store.pipe(this._lastGetEntry,u.map(function(t){return t.id}))},t.prototype.getGetObject=function(){return this._store.pipe(this._lastGetEntry,u.map(function(t){return t.object}))},t.prototype.getGetError=function(){return this._store.pipe(this._lastGetEntry,u.map(function(t){return t.error}))},t.prototype.getListLoading=function(){return this._store.pipe(this._lastListEntry,u.map(function(t){return t.loading}))},t.prototype.getListOptions=function(){return this._store.pipe(this._lastListEntry,u.map(function(t){return t.options}))},t.prototype.getListObjects=function(){return this._store.pipe(this._lastListEntry,u.map(function(t){return t.objects}))},t.prototype.getListError=function(){return this._store.pipe(this._lastListEntry,u.map(function(t){return t.error}))},t.prototype.getListHasNext=function(){return this._store.pipe(this._lastListEntry,u.filter(function(t){return null!=t.objects}),u.map(function(t){return t.objects.next}))},t.prototype.getListCurrentStart=function(){return this._store.pipe(this._lastListEntry,u.filter(function(t){return null!=t.options}),u.map(function(t){return null!=t.options.start?t.options.start:1}))},t.prototype.getCreateLoading=function(){return this._store.pipe(this._lastCreateEntry,u.map(function(t){return t.loading}))},t.prototype.getCreateObject=function(){return this._store.pipe(this._lastCreateEntry,u.map(function(t){return t.object}))},t.prototype.getCreateError=function(){return this._store.pipe(this._lastCreateEntry,u.map(function(t){return t.error}))},t.prototype.getUpdateLoading=function(){return this._store.pipe(this._lastUpdateEntry,u.map(function(t){return t.loading}))},t.prototype.getUpdateId=function(){return this._store.pipe(this._lastUpdateEntry,u.map(function(t){return t.id}))},t.prototype.getUpdateObject=function(){return this._store.pipe(this._lastUpdateEntry,u.map(function(t){return t.object}))},t.prototype.getUpdateError=function(){return this._store.pipe(this._lastUpdateEntry,u.map(function(t){return t.error}))},t.prototype.getPatchLoading=function(){return this._store.pipe(this._lastPatchEntry,u.map(function(t){return t.loading}))},t.prototype.getPatchId=function(){return this._store.pipe(this._lastPatchEntry,u.map(function(t){return t.id}))},t.prototype.getPatchObject=function(){return this._store.pipe(this._lastPatchEntry,u.map(function(t){return t.object}))},t.prototype.getPatchError=function(){return this._store.pipe(this._lastPatchEntry,u.map(function(t){return t.error}))},t.prototype.getDeleteLoading=function(){return this._store.pipe(this._lastDeleteEntry,u.map(function(t){return t.loading}))},t.prototype.getDeleteId=function(){return this._store.pipe(this._lastDeleteEntry,u.map(function(t){return t.id}))},t.prototype.getDeleteObject=function(){return this._store.pipe(this._lastDeleteEntry,u.map(function(t){return t.object}))},t.prototype.getDeleteError=function(){return this._store.pipe(this._lastDeleteEntry,u.map(function(t){return t.error}))},t.prototype.getDeleteAllLoading=function(){return this._store.pipe(this._lastDeleteAllEntry,u.map(function(t){return t.loading}))},t.prototype.getDeleteAllIds=function(){return this._store.pipe(this._lastDeleteAllEntry,u.map(function(t){return t.ids}))},t.prototype.getDeleteAllObjects=function(){return this._store.pipe(this._lastDeleteAllEntry,u.map(function(t){return t.objects}))},t.prototype.getDeleteAllError=function(){return this._store.pipe(this._lastDeleteAllEntry,u.map(function(t){return t.error}))},t.prototype.getQueryLoading=function(){return this._store.pipe(this._lastQueryEntry,u.map(function(t){return t.loading}))},t.prototype.getQueryOptions=function(){return this._store.pipe(this._lastQueryEntry,u.map(function(t){return t.options}))},t.prototype.getQueryObjects=function(){return this._store.pipe(this._lastQueryEntry,u.map(function(t){return t.objects}))},t.prototype.getQueryError=function(){return this._store.pipe(this._lastQueryEntry,u.map(function(t){return t.error}))},t.prototype.getQueryHasNext=function(){return this._store.pipe(this._lastQueryEntry,u.filter(function(t){return null!=t.objects}),u.map(function(t){return t.objects.next}))},t.prototype.getQueryCurrentStart=function(){return this._store.pipe(this._lastQueryEntry,u.filter(function(t){return null!=t.options}),u.map(function(t){return null!=t.options.start?t.options.start:1}))},t.prototype.getCreateSuccess=function(){return this._actions.pipe(a.ofType(this._actionTypes.CREATE_SUCCESS))},t.prototype.getUpdateSuccess=function(){return this._actions.pipe(a.ofType(this._actionTypes.UPDATE_SUCCESS))},t.prototype.getPatchSuccess=function(){return this._actions.pipe(a.ofType(this._actionTypes.PATCH_SUCCESS))},t.prototype.getDeleteSuccess=function(){return this._actions.pipe(a.ofType(this._actionTypes.DELETE_SUCCESS))},t.prototype.getDeleteAllSuccess=function(){return this._actions.pipe(a.ofType(this._actionTypes.DELETE_ALL_SUCCESS))},t.prototype.get=function(t){var e=H({type:this._actionTypes.GET,payload:{id:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.get})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.object}),u.map(function(t){return t.object}))},t.prototype.list=function(t){var e=H({type:this._actionTypes.LIST,payload:{params:t||{}}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.list})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.objects}),u.map(function(t){return t.objects}))},t.prototype.create=function(t){var e=H({type:this._actionTypes.CREATE,payload:{item:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.create})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.object}),u.map(function(t){return t.object}))},t.prototype.update=function(t){var e=H({type:this._actionTypes.UPDATE,payload:{item:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.update})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.object}),u.map(function(t){return t.object}))},t.prototype.patch=function(t){var e=H({type:this._actionTypes.PATCH,payload:{item:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.patch})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.object}),u.map(function(t){return t.object}))},t.prototype.delete=function(t){var e=H({type:this._actionTypes.DELETE,payload:{item:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.delete})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.object}),u.map(function(t){return t.object}))},t.prototype.deleteAll=function(t){var e=H({type:this._actionTypes.DELETE_ALL,payload:{items:t}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.deleteAll})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.objects}),u.map(function(t){return t.objects}))},t.prototype.query=function(t){var e=H({type:this._actionTypes.QUERY,payload:{params:t||{}}});return this._store.dispatch(e),this._store.pipe(c.select(c.createSelector(this._modelState,function(t){return t.query})),u.map(function(t){return t.find(function(t){return t.uuid===e.uuid})}),u.filter(function(t){return null!=t}),u.tap(function(t){null!=t.error&&o.throwError(t.error)}),u.filter(function(t){return null!=t.objects}),u.map(function(t){return t.objects}))},t}();t.MODEL_OPTIONS=N,t.ModelActions=F,t.ModelEffects=Y,t.ModelManager=$,t.ModelService=k,t.generateInitialModelState=Q,t.modelReducer=q,t.reducers=G,t.ɵa=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=core-model.umd.min.js.map
